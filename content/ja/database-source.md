---
title: "データベース ソース"
parent: "データソース"
tags:
  - "studio pro"
  - "データベース"
  - "データソース"
menu_order: 10
---

## 1つの紹介

**データベース** がウィジェットのデータ ソースとして選択されている場合、表示されるオブジェクトまたはオブジェクトはクエリを使用してデータベースから直接取得されます。 このデータソースは [オフライン](offline-first) アプリケーションでもサポートされており、その場合、データはモバイルデバイス上のデータベースから取得されます。

データベース [制約](#constraints)の助けを借りて表示されるデータをフィルタリングできます。 ただし、単一のウィジェットではなく、いくつかのウィジェットでデータを制限したい場合は、次のようにします。 データベース制約の代わりにエンティティに [アクセス ルール](access-rules) を適用することもできます。 このようにして、オブジェクトは常にこれらのルールによって制約されます。 また、繰り返し制約がなくなるマイクロフローを実行する際にもアクセスルールが適用されます。

## 2つのプロパティ

### 2.1 エンティティ (パス)

**エンティティ (パス)** プロパティは、データベースクエリのターゲットを指定します。 トップレベルのデータウィジェットを持っている場合、 **Entity (path)** は選択したエンティティのオブジェクトを直接取得します。 ネストされたデータウィジェットがある場合は、親データコンテナのエンティティを選択することもできます。 この場合、関連付けパスの後にオブジェクトが取得され、関連付けはデータベースクエリの追加制約として解析されます。

{{% image_container width="400" %}}![データソースの例](attachments/data-widgets/data-source-example.png)
{{% /image_container %}}

{{% alert type="info" %}}

これは、データベースではなく、メモリからオブジェクトが取得されたときに [関連データ ソース](association-source) と異なります。

{{% /alert %}}

### 2.2 検索バーを表示 {#show-search-bar}

**Show search bar** is only available for data grids. データグリッドの **[検索バー](search-bar)** が表示されるかどうかを選択できます。

| 値                           | 説明                                                                                  |
| --------------------------- | ----------------------------------------------------------------------------------- |
| 一切なし                        | 検索バーや検索ボタンは表示されません。 検索を効果的に無効にします。                                                  |
| ボタン付き (最初に開く)               | エンドユーザーは [**Search** ボタン](control-bar#search-button)を使用して検索バーを開閉できます。検索バーは最初に開かれます。 |
| ボタンあり (最初は閉じています) *(デフォルト)* | ユーザーは検索ボタンを使用して検索バーを開閉できます。検索バーは最初に閉じられます。                                          |
| 常に表示                        | 検索バーは常に表示され、閉じることはできません。検索ボタンもありません。                                                |

### 2.3 検索待ち

**Wait for search** プロパティは、 **[Show search bar](#show-search-bar)** が *With button (initially open)* または *Always* に設定されている場合に使用できます。

**Wait for search** が *Yes*に設定されている場合、エンドユーザーが検索を開始するコンテンツはグリッドが空のままになります。 これは、ターゲットエンティティが非常に大きなオブジェクトセットを含んでいる場合に便利ですが、ほとんどの変異ではデータのサブセットしか必要としません。 検索を待つと、所望のサブセットが指定されるまでデータベースクエリが実行されないようになります。 したがって、主要なデータの取得に関連する最初のロード期間をスキップします。

デフォルト: *false*

### 2.4 制約{#constraints}

制約は、表示されるデータのカスタム、ハードコードされた制限を許可します。 この制約はセキュリティ制約の上に適用されます。 例えば、エンティティにユーザーに対して読み取り専用にするアクセスルール、または XPath 制約がある場合などです。 XPath 制約が最初に適用されます。

それぞれの制約は、 **属性**、 **演算子**、 **値** で構成されています:

![制約例](attachments/data-widgets/constraint-example.png)

複数の制約により、データがさらに制限されます(論理演算子 **AND**)。 There is no way to use the logical operator **OR** in constraints, but you can switch to an [XPath data source](xpath-source) and create an XPath constraint.

{{% alert type="warning" %}}

制約はすべてのユーザーに均等に適用され、単一のデータウィジェットで表示されるデータにのみ適用されます。 目的がユーザーのためのデータの特定のサブセットへのアクセスを制限する場合、エンティティの [アクセス ルール](access-rules) を個々のユーザー ロールに適用され、システム全体に適用されるために使用する必要があります。

{{% /alert %}}

## 3 続きを読む

* [データウィジェット](data-widgets)
* [データグリッド](データグリッド)