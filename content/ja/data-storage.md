---
title: "データストレージ"
category: "Mendix Runtime"
tags:
  - "studio pro"
  - "データベース"
---

## 1つの紹介

データストレージは Mendix Runtime のデータ基盤です。 データストレージは以下の操作を行います:

* サポートされているリレーショナルデータベースへの接続
* ドメインモデルからエンティティと関連付けを保存して取得します
* XPath と OQL クエリを SQL クエリに変換します
* セキュリティを透明かつ効果的に処理する

{{% alert type="warning" %}}
各アプリには独自のデータベースがあり、他のアプリと直接共有することはできません。 他のアプリとデータを共有したい場合 [Data Hub](/data-hub/share-data) または Mendix の [REST および OData](integration) 機能を使用して API を公開する必要があります。

この概要については、以下の [データベースとアプリ](#databases)を参照してください。
{{% /alert %}}

## 2つのデータベース

Mendix Cloudにデプロイされたアプリの場合、MendixはPostgreSQLデータベースを使用してアプリケーションドメインモデルに定義されたデータを保存します。

異なるインフラストラクチャにデプロイする場合、Mendixは次のデータベースをサポートします。

* IBM DB2
* HSQLDB
* MySQL
* Oracle RDBMS
* PostgreSQL
* SAP HANA
* Microsoft SQL Server

## 3 つのデータベースとアプリ{#databases}

各アプリには独自のデータベースがあり、アプリ内のモジュールのドメインモデルに記載されています。

このセクションでは、アプリ間でデータベースを共有できない理由を説明し、データを共有するための別の方法を示します。

### 3.1 データベーステーブル名

アプリはその名前とモジュールを使用してエンティティを参照します。 ただし、各エンティティのデータを保持するデータベーステーブルは、一意の識別子によってドメインモデルのエンティティにリンクされます。 例えば、アプリ内の `Order` エンティティにID `807106d1-c0a8-4ef5-a387-2073cdee6d55` を与えることができます。 エンティティを削除し、同じ名前の新しいエンティティを作成する場合。 モデルは新しいエンティティとしてそれを見るように異なるIDを与えます。

ID はアプリ内でこのエンティティに紐付けられたままになり、同じデータベースを使用している間、複数のブランチを作成し、新しいバージョンのアプリケーションをデプロイすることができます。 これにより、ドメインモデル内のエンティティを変更し、名前を変更することができます。 アプリはまだ同じものであることを知るでしょう

ただし、モジュールをエクスポートして別のアプリにインポートすると、新しいアプリのエンティティに新しいIDが与えられます。 IDはデータベース内のテーブルとドメインモデルの関係を確認するために使用されます。 ドメインモデルが同じであっても、アプリケーションをデプロイすると、完全に異なるデータベーステーブルが得られます。 これは、別のアプリからデータをバックアップしたときに1つのアプリにデータを復元する場合にも当てはまります。

### 3.2 データベース共有の結果

Imagine you have an order handling app, `Order Processing`, which uses an `MyModule.Order` entity with the ID `807106d1-c0a8-4ef5-a387-2073cdee6d55`.

2番目のアプリ、 `Order Viewer`を作成し、注文を表示するために使用します。 `Order Processing` からドメインモデルをエクスポートし、 `Order Viewer` にインポートします。 ただし、この新しいアプリの `MyModule.Order` エンティティには異なる ID が与えられます。例えば、 `836a64f6-6e70-4f69-ba30-ed3876fd33b9`。

`Order Viewer` をデプロイして、 `Order Processing` と同じデータベースを使用しようとします。 `Order` エンティティは異なる ID を持っているため、Mendix Runtime は 2 つのテーブルを異なるものとして表示します。 既存のテーブル `mymodule$order` が削除され、新しい `mymodule$order` テーブルが新しいIDにリンクされます。

### 3.3 データを共有する方法

アプリ間でデータを共有したい場合は、 *マイクロサービス* アーキテクチャを設定する必要があります。 一言で言えば、データを保存するために使用するアプリを特定します。 このアプリは、データの作成、読み取り、更新、および削除をすべて行います。 これは、 [OData](published-odata-services) や [Data Hub](/data-hub/share-data/) など、他のアプリが使用するデータにアクセスできるようにするための API を公開します。 他のアプリは、このAPIを使用してデータを使用することができます。 これにより、データのソースは1つのみであり、一貫性が保たれます。

別の方法としては、たとえば、 [データベースレプリケーション](/appstore/modules/database-replication) モジュールを使用して、データを別のアプリにコピーすることです。 ただし、これは は複製時のデータのスナップショットとなり、元のアプリで行われたデータへの変更は新しいアプリに反映されません。
