---
title: "検証ルール"
parent: "エンティティ"
menu_order: 40
tags:
  - "ドメインモデル"
  - "エンティティ"
  - "検証ルール"
---

{{% alert type="info" %}}
<img src="attachments/chinese-translation/china.png" style="display: inline-block; margin: 0" /> 簡体字中国語の翻訳については、 [<unk> <unk> <unk>](https://cdn.mendix.tencent-cloud.com/documentation/refguide8/validation-rules.pdf) をクリックしてください。
{{% /alert %}}

## 1つの紹介

検証ルールは、オブジェクトがコミットされる前に満たされるべき条件です。 オブジェクトがコミットされたときに、バリデーションルールによって定義された条件が満たされない場合、ランタイムサーバーはバリデーションエラーを生成します。

オブジェクトがフォームを使用してコミットされた場合、これはバリデーションメッセージになります。

オブジェクトがmicroflowでコミットされた場合、カスタムエラー処理を使用してエラーを処理することができます。

その他のすべての場合、検証エラーは Java 例外がスローされます。

たとえば、エンティティ「顧客」の場合、名前とクレジットを常に入力する必要があります。 経費はクレジット以上にはなりません これは以下のようにドメインモデルエディタで視覚化されます。

![](attachments/domain-model/customer-validation-rules.png)

{{% alert type="warning" %}}
データベースの整合性を確保するように設計されているため、持続可能エンティティの検証ルールを定義することができます。 そのため、永続性のないエンティティでは検証ルールは無効になります。
{{% /alert %}}

## 2つのプロパティ

[エンティティ ダイアログ ボックス](entities#dialog-box) から、エンティティの検証ルールを追加および編集できます。

バリデーションルールプロパティの例は以下の画像で表されています:

![](attachments/domain-model/validation-rule-properties.png)

バリデーションルール プロパティは以下のセクションで構成されています:

* [全般](#general)
* [ルール](#rule)

### 2.1 一般プロパティ {#general}

#### 2.1.1 属性

**属性** は、検証ルールが適用される属性を指定します。 検証ルールはエンティティの属性に適用され、一般化がある場合はその一般化の属性に適用されます。

#### 2.1.2 エラー メッセージ

**Error message** は、属性値が検証ルールによって定義された条件を満たさない場合、エンドユーザーに表示されるメッセージを定義します。

### 2.2 ルールのプロパティ {#rule}

#### 2.2.1 ルール

ルールは、属性が満足すべき条件を定義します。

| Option         | 説明                                                                      |
| -------------- | ----------------------------------------------------------------------- |
| 必須 *（デフォルト）*   | 属性には値が必要です。 空にすることはできません。                                               |
| ユニークな          | この属性の値は、同じエンティティを持つ他のすべてのオブジェクトのこの属性の値と異なる必要があります。                      |
| 等しい            | 属性値は、指定された値または同じオブジェクトの他の属性の値と同じである必要があります。                             |
| Range          | 属性値は、2つの値以上、またはそれ以下、または2つの値間である必要があります。 値は、同じオブジェクトの他の属性の固定値または値を指定します。 |
| 正規表現           | この属性は、 [正規表現](regular-expressions) リソースに格納された正規表現に一致する必要があります。          |
| Maximum length | 属性は指定された文字数を超えない可能性があります。                                               |

{{% alert type="info" %}}
日付の値は [ISO 8601](http://en.wikipedia.org/wiki/ISO_8601) フォーマットで入力する必要があります。たとえば、2015-07-26 です。
{{% /alert %}}

#### 2.2.2 ルールの順序

Studio Pro ではバリデーションルールを順序付けることができます。 ルールの順序は、適用される順序を決定します。 複数のルールに違反した場合、すべてのエラーメッセージが(定義済みの順序で)記録され、ページに表示されます。 ただし、順序はエンティティ内のすべての検証ルールに設定できます。 すべての属性に対してすべての検証ルールが実行されるため、属性ごとの順序だけが影響を受けます。

`一意性` の検証は、定義された順序に従いません。 この検証はデータベースクエリを必要とし、完全なオブジェクトが他のすべての検証ルールに満足した場合にのみ実行されます。
