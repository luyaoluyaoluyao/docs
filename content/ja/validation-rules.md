---
title: "検証ルール"
parent: "エンティティ"
menu_order: 40
tags:
  - "ドメインモデル"
  - "エンティティ"
  - "検証ルール"
---


検証ルールは、オブジェクトがコミットされる前に満たされるべき条件です。 オブジェクトがコミットされたときに、バリデーションルールによって定義された条件が満たされない場合、サーバーはバリデーションエラーを生成します。 オブジェクトがフォームを使用してコミットされた場合、これはバリデーションメッセージになります。 microflow 内でオブジェクトをコミットすると、カスタムエラー処理を使用してエラーを処理できるようになります。 その他のすべての場合、検証エラーは Java 例外がスローされます。

{{% alert type="info" %}}

エンティティ「顧客」の場合、名前とクレジットは常に記入される必要があり、経費はクレジットより高くすることはできません。 これは以下のようにドメインモデルエディタで視覚化されます。

![](attachments/domain-model-editor/917546.png)

{{% /alert %}}{{% alert type="warning" %}}

データベースの整合性について何かを言うように、永続可能エンティティのみがバリデーションルールを定義できます。 そのため、永続性のないエンティティでは検証ルールは無効になります。

{{% /alert %}}

## 一般プロパティ

### 属性

このプロパティは、検証ルールが適用される属性を定義します。 エンティティは、自身の属性の検証ルール、またはその一般化のいずれかの属性を指定できます。

### エラーメッセージ

このプロパティは、属性値がバリデーションルールで定義された条件を満たさない場合、エンドユーザーに表示されるメッセージを定義します。

## ルールのプロパティ

### ルール

ルールは、属性が満足すべき条件を定義します。

| Option         | 説明                                                       |
| -------------- | -------------------------------------------------------- |
| 必須             | 属性には値が必要です。 空にすることはできません。                                |
| ユニークな          | 属性は、同じエンティティを持つ他のすべてのオブジェクトのこの属性の値と比較してユニークな値を持つ必要があります。 |
| 等しい            | 属性値は、指定された値または同じオブジェクトの他の属性の値と同じである必要があります。              |
| Range          | 属性値は、指定された値と同じオブジェクトの他の属性の値の間の範囲内にある必要があります。             |
| 正規表現           | 属性は [正規表現](regular-expressions) に一致する必要があります。            |
| Maximum length | 属性は指定された文字数を超えない可能性があります。                                |

_デフォルト値:_ 必須

{{% alert type="warning" %}}

日付の値は [ISO 8601](http://en.wikipedia.org/wiki/ISO_8601) フォーマットで入力する必要があります。たとえば、2015-07-26 です。

{{% /alert %}}

## ルールの順序

モデラーではバリデーションルールを順序付けすることができます。 ルールの順序が実行の順序を決定します。 複数のルールに違反した場合、エラーメッセージは(定義済みの順序で)連結され、ページに表示されます。 ただし、順序はエンティティ内のすべての検証ルールに設定できます。 すべての属性に対してすべての検証ルールが実行されるため、属性ごとの順序だけが影響を受けます。

`一意性` の検証は、定義された順序に従いません。 この検証はデータベースクエリを必要とし、完全なオブジェクトが他のすべての検証ルールに満足した場合にのみ実行されます。
