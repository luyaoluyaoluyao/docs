---
title: "公開されたOData リソース"
parent: "published-odata-services"
---

{{% alert type="warning" %}}

このドキュメントでは、公開された OData リソースのプロパティについて説明します。 OData サービスの概要を知りたい場合は、 [公開済みの OData Services](published-odata-services) ドキュメントを確認してください。

{{% /alert %}}

## 1 リソースの追加または編集

公開済みの OData Service ドキュメント内の **Add resource** または **Edit** ボタンは、公開済みリソース用のエディタウィンドウを開きます。 エディタウィンドウは、 **Resource** と **Uniform Resource Identifier** の2つの部分で区切られています。 前者は、公開するエンティティとエンティティの属性を指定できます。 後者はリソースが公開される場所をカスタマイズできます。

リソースを追加するもう一つの方法は、ドメインモデル内のエンティティを右クリックして **OData リソースとして公開** をクリックすることです。 これを行うと、新しいリソースを追加するために公開された OData サービス ドキュメントを選択または作成するように促されます。 ドキュメントが選択されると、公開されたリソースエディタが表示されます。

![](attachments/16713722/16843929.png)

### 1.1 リソース

**Select...** ボタンを押して、公開するドメインモデルからエンティティを選択できるダイアログウィンドウを開きます。 表示されているツリー内の図形をクリックし、 **を選択して** を押して確認します。

![](attachments/16713722/16843930.png)

IBM DB2 では、マルチユーザー環境でノンブロッキングの読み取り単離データ検索操作はサポートされていません。 したがって、OData によって取得されたデータは、同じデータ行が別のユーザーによって同時に変更された場合、100% 一貫性がない可能性があります。 詳細については、この [IBM DB2](db2) ページを参照してください。

## 露出された属性を選択する & 関連付け

When an entity to publish has been selected, press the **Select...** button to open a dialog that allows you to select individual attributes to expose.

_システム_._ID_ 属性は、OData サービスのキーとして使用されるため、チェックを外すことはできません。

公開されたエンティティの属性はデフォルトでは無効です。 つまり、値が **空** の場合、OData コンテンツ内の明示的な null としてエンコードされます。 _nillable_ 列の選択を解除すると、属性は **空** にはできません (そうでなければランタイムエラーが発生します)。

System.FileDocumentのContentsフィールド以外の、ODataサービスを介してバイナリの属性をエクスポートすることはできません。

## 内部名から公開名へのマッピング3

**Exposed entity name** フィールドを使用して、外部に公開されるリソースの名前をカスタマイズします。 デフォルトでは、ドメインモデルから公開されたエンティティの名前と同じ名前です。 文字と数字で始まる任意の名前に変更することができます。長さは最大480文字です。 ただし、場所 URI は一意である必要があります。 同じ場所に2つの異なるリソースを公開すると、一貫性エラーになります。

これは属性と関連付けにも適用されます。 「公開された属性と関連付け」画面では、ここで **公開された名前** を上書きすることもできます。

これらの名前が上書きされたとき、実体の名前 ドメインモデルで定義されている属性または関連付けは外部に公開されません。 すべての OData 通信では、公開された名前が使用されます。

これらの機能により、外部 API に影響を与えずにドメインモデルをリファクタリングしやすくなります。

## 4 エンティティセット名

リソースの URL の最後の部分を変更するには、 **エンティティセット名** フィールドを使用します。

_デフォルト値:_ エンティティ名 + s

## 5ページングを使用

このオプションを有効にすると、レスポンスあたりの最大オブジェクト数を設定でき、次のオブジェクトセットにリンクを含めることができます。 Tableau のようなクライアントは、これを使用して進捗状況を表示でき、すべてのデータが取得されるまで自動的にリンクに従います。 合理的なページサイズでページングを使用すると、クライアントのメモリ使用量が改善されます。

**これを有効にすると、取得されたデータが一貫性のないことを意味します**。なぜなら、あなたはもはや単一のトランザクション内でデータを取得していないためです。 たとえば、Customer と呼ばれるエンティティの Age 属性でソートし、1 ページにつき 1000 個のオブジェクトを持つ顧客を取得します。 2つの通話の間に顧客が削除されるようになりました。それは、ポジション1001の年齢23の顧客が位置1000に移動することを意味します。 つまり、あなたが __ で次のページを取得したであろうこのオブジェクトが最初のページに移動し、もう取得されないようになりました。 データが呼び出しの間に挿入されるもう一つの方法は、重複を見ることができます。 この種の矛盾が許容される場合にのみ、このオプションを使用してください。

_デフォルト値:_ いいえ

## 6 ページサイズ

ページングの使用が format@@0 に設定されている場合、ここでページあたりのオブジェクトの量を設定できます。

_デフォルト値:_ 10000
