---
title: "公開されたウェブサービス"
parent: "統合"
---


{{% alert type="warning" %}}

この文書では、公開された Web サービスについて説明します。 公開された Web サービスの画面で特定の情報を探している場合は、 [公開された Web サービス](published-web-service) のドキュメントを確認できます。

{{% /alert %}}

Mendixアプリケーションで独自のWebサービスを公開できます。 これらのウェブサービスは、オペレーションで構成されています。 他のアプリケーションは、このWebサービスの操作を呼び出すことができ、結果を返すことができます。 この結果は、webservice が呼び出されたときに実行されるマイクロフローに基づいています。

マイクロフローをWebサービスとして利用できるようにするには、マイクロフローの空白の任意の場所を右クリックし、「Webサービス運用として公開...」を選択します。

## ランタイムドキュメント

実行時にMendixプロジェクトはWebサービスのドキュメントを公開します。 The address is (if running locally) `http://localhost:8080/ws-doc/`. このドキュメントでは、サービスがどのように使用されるかを2つの方法で説明します。

### WSDL

これは、コンピュータが読み取ることができるXMLドキュメントです。 これは、モデラーがこのドキュメントを読んで、自動的にウェブサービスとやり取りする方法を把握できることを意味します。

### リクエスト/レスポンスの xml メッセージの例

"公開済みWebサービス" ページ (`http://localhost:8080/ws-doc/`) には、公開済みWebサービスごとに、すべての操作のリストもあります。 サンプルメッセージを記述するページへのリンク。 mendix-to-mendix相互作用を構築する際にこれらの例は必要ないことに注意してください。 彼らは純粋に自分の顧客を作りたい人々を助けるためにいるのです

## 公開されたウェブサービス通話はどのように機能しますか?

発行されたマイクロフローは、外部からシステムによって呼び出すことができます。 このセクションでは、このプロセスがどのように動作するかを見ていきます。

### 通話が開始されました

Webサービス呼び出しは、ランタイムが受け取り、Webサービス呼び出しとして認識するHTTP呼び出しです。 XML メッセージが受信され、ランタイムが理解するフォーマットに解析されます。

#### 認証

Webサービスの呼び出しごとに認証が必要です。 具体的には、SOAP envelope ヘッダーにはユーザー名とパスワードが含まれる「認証」という要素が含まれている必要があります。

```xml
<soap:Header>
        <tns:authentication>
            <username>john</username>
            <password>john'ssecretpassword</password>
        </tns:authentication>
    </soap:Header>

```

これらの詳細は __ ランタイム内の既存のWebサービスユーザーと一致する必要があります。 これらのユーザーは、管理者としてログインし、システムモジュールのUsersデータグリッドの「Webサービスユーザーの作成」をクリックすることで作成できます。 通常(非Webサービス)ユーザーはWebサービスを呼び出すことはできませんし、Webサービスユーザーは標準ログインページからログインすることはできません。 それ以外に、通常のユーザーとウェブサービスのユーザーがマイクロフローを呼ぶ方法に違いはありません。

#### パラメータの処理

パブリッシュされたMicroflowへの入力パラメータの種類に応じて、2つのことが起こります。

入力が Domain Entity の場合、XML は XML から Domain マッピングを使用してエンティティに変換されます。 これらのマッピングはマッピングに応じて実際のドメインオブジェクトを作成することに注意してください。

通常のパラメータ(整数、文字列など)はいかなる方法でも変換されず、直接入力として使用されます。

### マイクロフローが実行されます

XML からパラメータが解析されると、マイクロフローの呼び出しは通常通りに進行します。

### 結果は戻ってXMLに変換されます

マイクロフローが戻り値を持つ場合、それは webservice 呼び出しの結果として返されます。 パラメータと同様に、基本型は直接返され、ドメインエンティティは XML に変換されるマッピングが必要です。 数値の書式設定は、消費されたWebサービスと公開されたWebサービスの間で一貫しています。 ゼロの末尾は数字から削除され、科学的表記は使用されません。

### 応答ステータス

レスポンスのデフォルトのHTTPステータスコードは200(OK)です。 クライアントが不正な形式のリクエストを送信した場合、または内部サーバーエラーが発生したとき、ランタイムはSOAP障害で応答します。 HTTPヘッダーには、これらの場合にステータス500が含まれます。

ステータスコードは実際のレスポンスの前に送信されますのでご注意ください。 応答中にエラーが発生した場合、応答ステータスは変更できません。 これは、レスポンスのシリアル化中にサービスが失敗した場合でも、受信側がステータスコード200を受け取ることができることを意味します。 その理由は、メモリ使用量を最適化するために、メモリに応答全体を作成しないことです。 代わりに、シリアル化中に、応答はすぐにクライアントに送信され、メモリを解放します。 つまり、Webサービスを終了する前に、有効なレスポンスを作成するために必要なデータがあることを確認する必要があります。
