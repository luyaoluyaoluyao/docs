---
title: "ランタイムサーバー"
category: "Mendix Runtime"
description: "ランタイムサーバーの説明とそれがどのように機能するか"
menu_order: 10
tags:
  - "ランタイム:"
  - "ランタイムサーバー"
  - "ステートレス"
  - "データベース"
  - "ジャバ"
  - "マイクロフロー"
---

## 1つの紹介

Runtime Serverは、マイクロフローを実行し、ファイル、リレーショナルデータベース、およびその他の必要なサービスに接続するMendixランタイムの一部です。 Mendix クライアントからのリクエストを受け取り、応答でデータを提供します。

このRuntime Serverの説明は、クラウドで実行されているアプリに基づいています。 Mendixはテスト用にローカルで実行することもできますが、これは概念的にも同じです。

## 2つの説明

Runtime Serverはクラウドにデプロイされます (詳細は [Runtime Deployment](runtime-deployment) を参照してください)。Mendix Clientからの要求、または別のアプリまたはサービスからの呼び出しを待ちます。 リクエストを処理し、要求されたデータに加え、適切な場合は追加の状態情報を返します。 この通信がどのように行われるかについては、Mendix Runtime [の通信パターン](communication-patterns) を参照してください。 Runtime Server 自体はステートレスであり、複数のインスタンスに効率的にスケーリングすることができます。

以下は、Runtime Serverのコンポーネントを示すチャートです。 各コンポーネントは、チャートの下に記載されています。

![ランタイムサーバーの構成](attachments/runtime/runtime-server.png)

### 2.1 M2ee

M2eeは、アプリがクラウドにデプロイされたときにRuntime Serverを起動するために使用されます。 Runtime Serverが実行されると、m2eeを使用してRuntime Serverに戻り、ログレベルを設定するなどのコマンドを発行することができます。 どのくらいのユーザーがログインしているか、アプリケーション内で現在実行中のアクションを表示したり、シャットダウンするように指示したりすることさえあります。

M2eeは、認証されたPOSTリクエストをJSON形式でRuntime Serverの管理ポートに送信し、Runtime Serverと通信します。

### 2.2 ランタイムコア

これはJavaとScalaで書かれたインタプリタです アプリケーションモデルを使用してMendixクライアントからのリクエストや外部サービスからのリクエストを処理する方法を決定します。 要求に応えるために必要な様々なプロセスを制御することができます

### 2.3 プロジェクトモデル

これには、ドメインモデル、マイクロフロー、インポートマッピングなど、アプリの動作を定義するモデルが含まれています。 これは、ランタイム・コアがアプリケーションを実行するために解釈するものです。

### 2.4 一時的なオブジェクト ストレージ

これは、Runtime Server で使用されているが、データベースにまだコミットされていないオブジェクトを保持します。 これらは将来的にコミットされる可能性があります (例えば、新しいオブジェクトや変更されたオブジェクトの場合)。 または未コミットのままである可能性があります (たとえば、永続性のないオブジェクトである場合)。

### 2.5 ファイルストレージマネージャー

これにより、非リレーショナルデータの取得と保存が制御されます。 特に、FileDocument エンティティに関連付けられたデータを取得します。

### 2.6 ファイルストレージ

これは、アプリで使用されるデータの一部であるファイルが格納される場所です。 特に画像を含む *FileDocument* オブジェクトの値が含まれています。 サイズやパフォーマンスの制限を避けるためにデータベース外に保存する必要があるバイナリオブジェクトです

### 2.7 データベースの同期

データベース同期はアプリの起動時に開始されます。 アプリケーションのDomain Modelが更新された後にアプリケーションがデプロイされると、データベースに適用される必要があるデータベース構造の変更を管理します。 例えば、エンティティに新しい属性が追加された場合、これをサポートするためにデータベース構造を更新する必要があります。

このアクティビティは、Runtime Serverのインスタンスが複数ある場合、クラスターリーダーインスタンスによって実行されます。 このアクティビティが行われている間、データベースの同期が完了するまで、他のすべてのインスタンスは一時停止します。

### 2.8 外部サービス通話

外部サービスへの呼び出しを管理し、データを取得します。 アプリケーションは、OData や REST など、さまざまな API 形式を使用して、複数の外部サービスを呼び出すことができます。

### 2.9 外部サービス

これはアプリにデータを提供するサービスです。 外部サービスリクエストを受け付ける別のMendixアプリ、SAPやGoogleマップなどのサードパーティサービスなどのサービスを利用することができます。

### 2.10 リレーショナルデータベース

これは、アプリケーション内のドメインモデルで定義されているオブジェクトを保持するデータベース(または共有データベースのスキーマ)です。

### 2.11 クエリの実行

これにより、アプリケーションにバインドされたリレーショナルデータベースにデータを取得および保存するためのCRUD (create、read、update、delete)操作が管理されます。 操作はデータベースに合わせて調整された SQL を使用して実行されます。

SQL 内でクエリーがフォーマットされていない場合、クエリー実行者はそれらを元のフォーマットから変換します (例えば、XPath または OQL など)。

また、アプリ内で設定されたセキュリティも適用されます。

### 2.12 オブジェクトマネージャー

Runtime Server でメンテナンスされているオブジェクトを管理します (非永続性、新規作成) 変更されたオブジェクト) リクエストの最後に Mendix クライアントに返されるようにします。

### 2.13 マイクロフローエンジン

これは、アプリモデル内のマイクロフローで定義されているロジックを実行します。

### 2.14 スケジューラ

スケジューラは、あらかじめ設定された時間または間隔でマイクロフローアクションをトリガーします。

### 2.15 ライセンスサーバー

これは、アプリを実行するために使用されているライセンスに関する情報を提供するサービスです。 使用されるライセンスは、アプリに追加できる名前付きユーザーの数と、同時にアプリを使用できるユーザーの数を定義します。

### 2.16 カスタム Java

これにより、アプリモデルでJavaアクションとして保持されるカスタム Javaが実行されます。

### 2.17 Mendix Client API

これは Mendix クライアントからリクエストを受け取り、それらをデコードし、Runtime Core または Object Manager に渡します。 を選択し、リクエストが処理されると、Mendix クライアントへの応答をフォーマットします。 Mendix Client API は *xas* (XML Application Server) として知られています。

### 2.18 カスタムリクエストハンドラー

これはcom.mendix.core.Core.Core#addRequestHandler(… ) を使用してアプリに追加されたリクエストハンドラです。 API コール。

### 2.19 外部サービスリクエスト

これにより、他のサービスからのリクエストを受け取り、それらをデコードし、Runtime CoreまたはObject Managerに渡します。 を選択し、リクエストが処理されると、サービスへの応答をフォーマットします。 これらのリクエストは次のとおりです。

* Web サービス – SOAP インターフェイスを介してマイクロフローを公開します
* REST - これは、REST エンドポイントを介してマイクロフローを公開します
* OData – これは、OData エンドポイントとしてエンティティデータを公開します
* 他にも、WSDLやSwaggerなどのメタデータインターフェースがあります。

### 2.20 HTTPS サーバー

これにより、Mendixクライアントまたは他のサービスからのHTTPSリクエストがデコードされ、Runtime Serverに渡されます。

### 2.21 Mendix Client

これは、エンドユーザーがアプリと対話できるようにするブラウザまたはデバイスです。 これは、ChromeなどのWebブラウザ、またはiPhoneなどのモバイルデバイスである可能性があります。 通常、エンドユーザーがアプリを使用できるように、画面、ポインタデバイス、および入力デバイスを備えています。

Runtime Serverは、 *xas* というプライベートAPIを使用してMendixクライアントと通信します。

Mendix クライアントの説明については、 [Mendix Client](mendix-client) を参照してください。
