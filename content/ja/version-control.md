---
title: "バージョン管理"
description: "このドキュメントは定義を提供し、バージョン管理プロセスを説明します"
tags:
  - "バージョン管理"
  - "アプリケーションのライフサイクル管理"
  - "コミット"
  - "共同作業"
---

## 1つの紹介

バージョン管理では、次の2つの方法でアプリ開発を管理できます。

* まず、モデルの現在のリビジョンとそのすべてのリソースを格納することができます([commit](#commit))。 そのリビジョンを再度取得し、他のチームメンバーと共有できるように、識別子を与えます。
* 第二に、複数の異なる機能を一度に操作できるようにするために、複数の [開発ライン](#development-line)で作業を行うことができます。 これらの開発ラインは [マージ](#merge) することで、 [メインライン](#main-line) には個別に作業したすべての完了した機能が含まれるようになります。

Mendix のバージョン管理は [Apache Subversion](https://subversion.apache.org/) 上に構築されており、その概念は Subversion ユーザにとってよく知られています。 Mendixは、Studio Pro、Studio、およびDeveloper Portalにビルドすることで、Subversionコマンドを簡素化します。

## 2つのコンセプト {#concepts}

### 2.1 チームサーバー {#team-server}

[Team Server](/developerportal/collaborate/team-server) は、Mendix アプリのコミットされたすべてのバージョンが保存される場所です。 アプリのリビジョンをコミットすると、チームサーバーに保存されます。

Team Serverにコミットするには、アプリケーションを編集できるプロジェクトのロールが必要です。

### 2.2 リポジトリ {#repository}

[Team Server](#team-server) 内には、各アプリがリポジトリに格納されます。 このリポジトリには、アプリの [ブランチ](#commit) のすべての [コミットされたリビジョン](#branches) が含まれています。

### 2.3 リビジョン {#revision}

リビジョンは、 [Team Server](#team-server) に保存された一瞬のアプリケーションのバージョンです。

アプリの各リビジョンには、それを識別し、将来的にそれを見つけることができるようにする固有の番号が与えられます。 Studio Pro から新しいリビジョンが作成されます。

* アプリはリポジトリにコミットされています
* Studio Pro の作業コピーは Studio の作業コピーから更新されます。

### 2.4 作業コピー {#working-copy}

作業コピーは、現在Studio Pro または Studio で作業中のアプリケーションのバージョンです。 Studio Proの場合、アプリの開発ラインごとに作業コピーが1つあります。 このモデルは、開発作業が行われている各コンピュータでローカルに保持されています。

Studio では、クラウド上で作業コピーが 1 つ追加されます。 これを編集できるのは一度に1つの開発者だけです。

### 2.5 マージ {#merge}

マージとは、あるアプリの [リビジョン](#revision) を取って、別のリビジョンで行われた差分を適用するアクションです。 詳細は [ブランチ](#merging-branches) のセクションを参照してください。

相違点のいずれかを適用できない場合は、 [競合](#conflict)があります。

### 2.6 競合 {#conflict}

競合は、2つのバージョンのアプリを自動的に組み合わせることができない場合に発生します。 これは、Studio Pro の作業コピーで同じドキュメントが変更され、コミット [のリビジョン](#revision) がされた場合に発生します。これらの変更は調整できません。 以下はいくつかの例です。

* ウィジェットのプロパティはリビジョンと作業コピーで変更されますが、異なる設定に変更されます
* リビジョンでドキュメントが移動または削除されますが、作業コピーで別の方法で変更されています

競合が発生したとき 開発者は、新しいリビジョンとして Team Server にコミットする前にどのように解決すべきかを決定するために介入する必要があります。

### 2.7 アップデート {#update}

Studio Proで起動されたアクションは、更新が実行されます。 これは、Team Serverリポジトリから現在の [開発行の最新のリビジョン](#development-line) を取得し、現在の作業コピーに差分をマージします。

Studio がこの開発ラインで有効になっている場合、プロセスはまず、Studio 作業コピーが新しいリビジョンとして保存されます。

### 2.8 コミット {#commit}

コミットは、Studio Pro で実行されるアクションです。 をクリックします。 [リポジトリ](#repository) にすべての変更を送信し、新しい [リビジョン](#revision) を作成します。

Studio がこの開発ラインで有効になっている場合 この処理により、Studio の作業コピーが新しいリビジョンとして保存され、Studio Pro の作業コピーにマージされます。 競合がない場合は、変更がリポジトリに送信され、新しいリビジョンが作成されます。

### 2.9 開発ライン {#development-line}

アプリの開発は、関連する一連の変更が行われる開発ラインで行われます。 開発ラインには、 [メインライン](#main-line) と [ブランチライン](#branch-line) の 2 種類があります。

#### 2.9.1 本線 {#main-line}

Main Lineは、アプリの初期開発ラインであり、通常は本番環境にデプロイされるバージョンとして保持されます。 シンプルなアプリや、高度なコラボレーションを必要としないアプリは、メインラインしかない可能性があります。

#### 2.9.2 支線 {#branch-line}

支線とは、本線から離れて検証可能な変更を独立して行う方法です。

分岐線の使用方法については、以下の [ブランチ](#branches)を参照してください。

### 2.10 スタジオが有効です {#studio-enabled}

開発ラインのいずれかで Studio を有効にできます。 これは開発者がStudio経由でアプリを変更し、チームと変更を共有できることを意味します。 すべての変更は選択したブランチにリンクされ、そのブランチのリビジョンとして反映されます。 他の開発ラインに加えられた変更は Studio 内では利用できません。

開発ラインで有効になっていない場合、Studio を使用してアプリを開発することはできません。

開発者ポータル経由で作成されたアプリテンプレートの場合、新しいアプリのメインラインはStudioが有効になります。

### 2.11 タグ

タグは [リビジョン](#revision) に加えてコミットを識別する方法です。 開発者によって指定され、以下の4つの部分があります。

* メジャー：重要な新機能、新しいユーザーインターフェイス、その他の重要な変更を識別するために使用されます
* マイナー：アプリのメイン機能を拡張する新しい機能を識別するために使用されます
* パッチ: 以前リリースされたアプリでエラーの修正を識別するために使用されます
* リビジョン: これは自動的に追加され、コミットのリビジョン番号です

### 2.12 リポジトリサービス

リポジトリサービスは、Studio または Studio Pro と他のサポートサービス(Team Serverなど)との間の通信を管理します。 開発者は、一般的にリポジトリサービスを介して通信していることを認識していません。

## 3 単一ブランチのバージョン管理プロセス {#vc-single}

以下の図は、2人の開発者がアプリケーションの [Studio対応](#studio-enabled) 開発ラインでどのように動作するかを示しています。 ある開発者はStudioで、一つはStudio Proで、もう一つはStudio Proで作業しています。 両方とも、同じ開発ライン (メインライン など) で動作します。

![](attachments/version-control/image1.png)

### 3.1 Studio only での作業

開発者は Studio のアプリ上で動作します。 彼らは状態1のアプリから始まり、これは新しいアプリまたはアプリのリビジョンにすることができます。 変更は、Studio の作業コピーに対して継続的に行われ、クラウドに保存されます。

![](attachments/version-control/image2.png)

### 3.2 Studio Pro 版のみ

別の(または同じ)開発者は、Studio Proで初めてアプリを開きます。 Studio 作業コピーの現在の状態からチーム サーバーに新しいリビジョン (状態 2) が作成されます。 Studio Pro の作業コピーとしてローカルマシンにダウンロードされます。 Studio は一時的にロックされているため、コピー中に Studio 作業コピーが安定しています。

開発者は、Studio Proでアプリのローカル作業コピーを動作します。 このシナリオではStudioでは作業が行われていません。

開発者はいつでもこれをTeam Serverリポジトリにコミットして、新しいリビジョンを作成することができます (状態3)。 このリビジョンはStudio作業コピーにコピーされ、Studioを使用している開発者は自動的に変更を受け取ります。

![](attachments/version-control/image3.png)

### 3.3 Studio & Studio Pro での作業

2人の開発者が、同じアプリの同じ [開発ライン](#development-line) に同時に取り組んでいます。 一つはStudio Proを使用し、もう一つはStudioを使用しています。 Studio Pro と Studio からの変更は、Studio Pro のローカル マシンと Studio のクラウドのそれぞれの作業コピーに保存されます。

![](attachments/version-control/image4.png)

### 3.4 Studio Pro の作業コピーを更新

Studio Proを使用した開発者は、Studioを使用して開発者によって行われた変更を含めたいと考えています。 作業コピーを更新することを選択します。

Studio の作業コピーからのすべての変更は、Team Server (state 4) の新しいリビジョンに追加されます。 このリビジョンは、Studio Pro の作業コピーにマージされます。 Studio Pro の作業コピーが更新されている間、Studio は一時的にロックされ、コピー中に Studio の作業コピーが安定しているようになります。

{{% alert type="info" %}}
このブランチに変更をコミットしている場合は、Studio Proを使用している他の開発者からも変更が反映されます。
{{% /alert %}}

競合が発生した場合、Studio Pro を使用する開発者は、Team Server リポジトリに変更をコミットする前にそれらを解決する必要があります。

![](attachments/version-control/image5.png)

### 3.5 チームサーバーリポジトリへのコミットの変更

Studio Pro を使用する開発者は、Team Server に新しいリビジョンをコミットしたいと考えています。 これにより、Studio を使用した開発者、または Studio Pro を使用した別の開発者が、開発者が行った変更を確認して作業できるようになります。 また、リビジョンをクラウドにデプロイできることも意味します。

開発者がコミットを選択し、次のことが起こります。

* スタジオは一時的にロックされています
* Studio 作業コピーはリビジョンとして反映されます (復元ポイント – 状態5)
* 作成されたばかりのリビジョン（状態5）は、Studio Proの作業コピーと統合されます。

マージがない場合 [コンフリクト](#conflict), 更新された Studio Pro の作業コピーは新しいリビジョン (状態 6) として反映され、Studio の作業コピーは新しいリビジョンに更新され、ロックが解除されます。

競合がある場合は、Studio Pro を使用している開発者がこれらを解決する必要があります。 Studio は、Studio Pro からの変更を受信せずにロック解除されます。 Studio Proを使用している開発者は再度コミットする必要があります そして、プロセスは最初から始まります (Studio は、Studio 作業コピーからコミットされる新しいリビジョンの準備ができてロックされています)。

![](attachments/version-control/image6.png)

## 4ブランチ {#branches}

より複雑なアプリでは、コードをより洗練された方法で管理することができます。 例えば、 現在デプロイされているバージョンのアプリとは別に新機能を開発して、すべての新機能をリリースせずにバグを修正できるようにすることもできます。

これは [分岐線](#branch-line) を使用して行われます。

### 4.1 本線

すべてのアプリはメインライン( **トランク**とも呼ばれます)に沿って開発されています。 ここでは、以前のリビジョンに基づいて構築されたすべての変更とともに、すべての開発が単一の行に沿って行われています。

![](attachments/version-control/image7.png)

これは、上記の [単一ブランチ](#vc-single)のバージョン管理プロセスで説明されているバージョン管理プロセスの場合です。

初期の段階では、Studio を使用している開発者は、Studio が有効になっている開発ラインにのみアクセスできます。 ただし、Studio Pro を使用する開発者は別の開発ラインに切り替えることができます。

### 4.2 支線

ブランチラインを追加すると、既存の [リビジョン](#revision) のコピーを取り、そのコピーで別々に作業します。 一方のブランチに加えられた変更は他のブランチには影響しません。

Mendixでは、 [リポジトリ](#repository) 内の各リビジョンに固有のバージョン番号が与えられます。 これは、選択されたブランチ行に沿ってリビジョンに与えられたバージョン番号を連続的に使用することはできないことを意味します。

![](attachments/version-control/image8.png)

### 4.3 ブランチの結合 {#merging-branches}

独立して継続され、他の開発ラインと組み合わせる必要はありませんブランチラインを持つことができます。 たとえば、アプリケーションの特定のリリース用にブランチを作成し、そのリリースのバグを修正するためにのみそれを使用することができます。

一方、あるブランチからの機能を別の開発ラインに追加したい場合があります。 以下の2つのケースがあります:

* ブランチラインで新機能を開発し、メインの開発ラインに追加します。
* 別のブランチラインで行われたバグ修正を利用します。

ブランチ行の特定のリビジョンを現在の [作業コピー](#working-copy)にマージできます。 たとえば、リビジョン 6 に更新されたメイン行で作業している場合。 別のブランチラインから作業コピーに [マージ](#merge) リビジョン5を行えます。 その後、結果をコミットしてリビジョン 7 を作成できます。 ブランチからの複数の異なるコミット変更をマージする場合。 すべての変更を含むリビジョンの範囲を選択する必要があります。

![](attachments/version-control/image9.png)

[単一のブランチ](#vc-single) のバージョン管理プロセスの例と同じです。 マージ中に競合が発生する可能性があります。アプリに変更を反映する前にこれを解決する必要があります。

マージ中に競合が特定されない場合でも、 [merge](#merge) プロセスによってエラーが発生する可能性があることに注意してください。 エラーは、Studio と Studio Pro でフラグが立てられており、アプリがデプロイされることを防ぎます。 これらはリビジョンをデプロイできない可能性があるため、マージを行った後にエラーをチェックすることが重要です。

## このカテゴリ内の5つのメインドキュメント

* [Studio Pro でバージョン管理を使用する](using-version-control-in-studio-pro) – バージョン管理を使用するための技術的な詳細を提示します (理論上の懸念については上述します)
* [コラボレーション開発](collaborative-development) - 複数のチームがアプリに取り組んでいる場合、アプリモデルの変更を共有するプロセスを説明します
* [Team Server](/developerportal/collaborate/team-server) – 開発者ポータルでTeam Server情報を表示する概要を説明します (例えば、リビジョンの概要や詳細など)。
