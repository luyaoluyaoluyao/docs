---
title: "一般的なランタイム & Java エラー"
parent: "runtime-Java"
menu_order: 3
tags:
  - "ランタイム:"
  - "ジャバ"
---

## 1つの紹介

あなたのアプリケーションが不安定な実行を開始すると、不安定になるか、さらに悪くなります:クラッシュします。 まず最初にアプリケーションのログを確認して何が原因かを確認します そこに **FATAL** または **CRITICAL** のログラインがあれば、すぐにそれらの解決に取り組んでください。 **エラー** のログラインも同様に扱う必要がありますので、常にそれらを取り除くように努める必要があります。

## 2つのよくあるエラー
アプリケーションをダウンさせる可能性のあるアプリケーションログにある、より一般的なエラーのいくつかは、この記事のトピックです。 さっそく飛び込みましょう。

### 2.1 java.lang.StackOverflowError

あなたのアプリケーションは、これらの悪い男の子の一つから回復するつもりはありません。 Mendixアプリケーションの実行中にこれらのいずれかに遭遇した場合、実質的には無限ループによって引き起こされるでしょう。 単一のマイクロフロー呼び出しアクションで *Microflow* と呼ばれるマイクロフローを作成し、 *Microflow* と呼ばれるマイクロフローを選択することで、これを簡単に再現できます。 無限ループはアプリケーションをクラッシュさせ、スタックオーバーフローエラーが発生します。

### 2.2 java.lang.OutOfMemoryError: Java ヒープスペース

これは、JVMヒープが「十分で十分である」と言うときに発生するエラーです。 私はこれのすべてを私の記憶に収めることができません。 通常、アプリケーションが不安定になり、クラッシュする前に再起動する必要があり、解決する本当の問題があることを意味します。

次のことはこのエラーの原因となる可能性があります:

*   メモリリーク
    *   開発者によって導入されたカスタムコード
    *   Mendix Runtime のバグ
    *   開発者またはMendix Runtimeのカスタムコードで使用されるJavaライブラリのバグ
    *   Java Runtime のバグ
*   オブジェクトの大規模な作成（例えば、1つのマイクロフローで1兆個のエンティティを一度に取得するなど）
*   設定の問題またはサイジングの問題

メモリリークは、ガベージコレクタが実行を停止したように見えます。 グラフの前半部分を以下に示します。

![](attachments/mendix-runtime-java-errors/2.jpg)

Object Cache (Heap 内の Mendix オブジェクト) グラフを常に見て、Heap に似ているかどうかを確認することをお勧めします。 例:

![](attachments/mendix-runtime-java-errors/3.jpg)

これはかなり健康的に見えます。

Object Cache が無期限に上昇している場合は、メモリリークを自分で導入している可能性があります。アプリケーションをすぐに分析して、その可能性があるかどうかを確認することをお勧めします。

一方、 下のグラフに見えるのであれば、コントロール外でバグを扱っている可能性があります (例えば、 メモリリークの原因となっているMendix Runtime)。

![](attachments/mendix-runtime-java-errors/4.jpg)

### 2.3 java.lang.OutOfMemoryError: GC のオーバーヘッド制限を超えました

そのような不可解な説明。 しかし、それは本当に非常に簡単です。 これはJVMに「ゴミを集めるのに時間がかかりすぎる（デフォルトではCPU時間の98%）。毎回ほとんどメモリを回収していない（デフォルトではヒープサイズの <2%）。 今すぐアプリケーションを停止させてください。クラッシュする前に何が間違っているか分かるようにしてください。」

このエラーの最も一般的な原因は次のとおりです。

1.  ほとんどの場合、短時間で多くのオブジェクトを作成します。
2.  時には多くのオブジェクトを素早く連続して作成することもあります。
3.  まれに、何か他のもの。

このエラーを再現したい場合は、以下のようにします。

![](attachments/mendix-runtime-java-errors/common-errors.png)

最終的には、ガベージコレクタがメモリを解放しようとするときに作成されたすべてのアカウントのためにメモリが低下します。 アカウントのすべてのオブジェクトがまだ生きているように、これを行うことはできません。 しばらくすると、エラーが返されます。

以上で、アプリケーションログで一般的なエラーが発生し、アプリケーションがダウンする可能性があります。 しかし、共有するアイテムがもう一つあります。 エラーログのエラーではありませんが、概説した症状の一部と一致する可能性があります。

### 2.4 アプリケーションサーバー上のリソース不足

灰色の *コミットした* 行のピークが *アプリケーションノードオペレーティングシステムメモリ* グラフの白い部分に表示されている場合。 あなたのアプリノードはより多くのメモリを必要とします。 この場合、大きなコンテナへのアップグレードを強くお勧めします。 この問題の例については、次のグラフを参照してください。

![](attachments/mendix-runtime-java-errors/6.jpg)

