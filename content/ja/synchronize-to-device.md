---
title: "デバイスと同期"
parent: "client-activities"
tags:
  - "studio pro"
  - "デバイスに同期"
  - "クライアントアクティビティ"
menu_order: 60
---

{{% alert type="warning" %}}
このアクティビティは、オフライン最初のアプリ (ネイティブまたはオフライン PWA アプリ) で実行される **Microflow** でのみ使用できます。
{{% /alert %}}

## 1つの紹介

**デバイスに同期** アクティビティは、1つまたは複数のオブジェクトまたはリストをデバイスに選択的に同期し、それらをオフラインデータベースに格納するために使用できます。 オフラインアプリで使用され、オンラインアプリで使用されている場合は何もしません。

{{% image_container width="200" %}}
![デバイスに同期](attachments/client-activities/synchronize-to-device-action.png)
{{% /image_container %}}

## 2つのプロパティ

このアクティビティには2つのプロパティがあります。 左側のダイアログボックスと右側のプロパティ ペインに表示されています

![デバイスのプロパティに同期](attachments/client-activities/synchronize-to-device-action-properties.png)

**** のアクティビティプロパティは以下のセクションで構成されています。

* [アクション](#action)
* [一般的な](#common)

## 3 アクションセクション {#action}

プロパティ ペインの **アクション** セクションには、このアクティビティに関連付けられたアクションが表示されます。

アクションの横にある省略記号 (…) をクリックすることで、このアクションを構成するダイアログボックスを開くことができます。

また、マイクロフロー内のアクティビティをダブルクリックするか、アクティビティを右クリックして **プロパティ** を選択することで、ダイアログボックスを開くこともできます。

### 3.1 オブジェクトまたはリスト

同期するオブジェクトまたはリストを参照する変数。

## 4つの共通セクション {#common}

{{% snippet file="refguide/microflow-common-section-link.md" %}}

## 5つの制限事項

**をデバイス** に同期させる場合は、以下を考慮してください。

* オフライン最初のアプリで使用する永続的なオブジェクトまたは永続的なオブジェクトのリストのみ同期できます。
* 現在のユーザがアクセスルールにより一部のオブジェクトにアクセスできない場合、 それらはデバイスと同期されません。 オフラインデータベースに既に同じオブジェクトが含まれている場合は、削除されます。
* デバイスに同期するオブジェクトが同じマイクロフローで削除された場合 **デバイスに同期** アクティビティが見つかった場合、オフラインデータベースからそれを削除します。
* 自動コミットおよび新規オブジェクトはスキップされます。
* これは、イベント・マイクロフローからではなく、ナノフローから呼び出されるマイクロフロー内のオブジェクトのみを同期します。

## 6つの備考

**をデバイス** に同期させる場合は、以下を考慮してください。

* このアクションは、 [何も（データを保存しない）](offline-first#customizable-synchronization) オプションと組み合わせて使用し、同期アクション中にデータがクリアされていないことを確認する必要があります。
* **デバイスと同期する** アクションは追加モードで動作し、データベース内のすべてのデータを置き換えるわけではありません。 既存のデータは保持され、クライアントに送信されるオブジェクトのみが影響を受けます。
* 同じオブジェクトまたはリストを複数回同期すると、一度だけ同期します。 最新のコミット状態が同期されます。
* 既存の汚れオブジェクトを同期すると、汚れ値が上書きされ、汚れ状態が消去されます。 ただし、オブジェクトをロールバックするまで、反映されていない変更はアプリ内でも利用できます。
* **デバイスと同期する** は、データベース内で同じオブジェクトが見つかったときに、常に既存のデータを上書きします。 That means if **Synchronize to device** is used for offline objects that were changed and commited in offline, all those changes will be lost and attributes of the affected objects will be reset to their runtime values.
* 同期されたオブジェクトの microflow におけるコミットされていない変更はクライアントに送信されますが、オブジェクトはオフラインバージョンにロールバックされます。
