---
title: "XML スキーマのサポート"
parent: "xml-schemas"
tags:
  - "studio pro"
---

## 1つの紹介

Mendix は、XML のインポート/エクスポートのための入出力フォーマットと、XML スキーマ定義 (XSD) ファイルを解釈することにより、SOAP/XML Web サービスを呼び出すためのフォーマットを派生します。 XML スキーマ (.xsd ファイル) または Web サービス定義 (. Mendix Studio Proを使用すると、サポートされていない構造に関する警告メッセージが表示されるダイアログが表示される場合があります。 これは、現在 Mendix が XSD 標準全体をサポートしていないためです。 Mendix 内のマッピングはエンティティと属性に基づいており、いくつかの XSD 構造はこのフォーマットのために簡単に自分自身を貸さない。 次の表は、Mendix でサポートされている XSD 構造を示しています。

| XSD の構築      | サポートされている                  |
| ------------ | -------------------------- |
| グループ         | はい                         |
| シーケンス        | 一度だけ発生した場合のみ               |
| 選択           | 個々のオプションがシーケンス要素でない場合のみ    |
| ユニークな        | はい                         |
| 属性グループ       | はい                         |
| すべて          | **すべての** の子要素が一度だけ発生した場合のみ |
| 結合           | はい                         |
| 任意の          | いいえ                        |
| anyAttribute | いいえ                        |
| リスト          | いいえ                        |

Mendix には XML マッピングの種類があります: import マッピング(XML データを Mendix オブジェクトに変換するマッピング)と、反対のマッピングをエクスポートします。 インポートマッピングは、マイクロフロー内の 'Import XML' アクティビティを使用して XML ファイルをインポートしたり、Web サービス呼び出しの応答を処理したりする際に使用されます。 エクスポートマッピングは、マイクロフロー内の XML ファイルをエクスポートし、Web サービス呼び出しの要求のために XML を生成するために使用されます。

マッピングをインポートするためのマッピングエディタで。 XSD に従い、XML 内で発生する可能性のある要素をチェックし、それらの要素の Mendix オブジェクトへのマッピングを定義することができます。 どのくらいの頻度で、またはどの順序要素が発生するかは重要ではありません。要素が発生するたびに、その要素に対応するマッピングが適用されます。

XSD にサポートされていない構造が含まれている場合、この警告アイコンを使用してマッピングエディタでハイライトされます: ![](attachments/16713707/16843903.png)

これはサポートされていない各要素または属性の隣にあります。 そのような要素や属性をチェックすると、一貫性のエラーになります。

エクスポートマッピングを使用して生成された XML は、XSD 仕様に厳密に従う必要があります。 これは、マッピングにより生成される XML タグが XSD が指定する正確な順序である必要があることを意味します。

## 2つの要素と種類

XSD は、XML 内のタグに対応する要素を定義します。 要素には、プリミティブ値や子要素のリストなど、コンテンツを定義する型があります。 要素は単純型または複合型のいずれかを持つことができ、複合型は単純または複合型のいずれかを持つことができます。 単純な型と単純なコンテンツを持つ複合型の両方に対応 要素の内容は整数値や文字列値などのプリミティブ値です。 複合コンテンツを持つ複合型の場合、要素のコンテンツは複数の子要素で構成することができます。 複合型は XML タグ内で発生することのできる属性を定義することもできます。

以下の例は、スキーマに準拠する XML スキーマと XML インスタンスを示しています。 スキーマは複雑なコンテンツを持つ複合型を持つ「customer」要素を定義します。すなわち、要素「name」と「shoesize」のシーケンスです。 'name' 要素には単純な型、つまり 'string' があります。 'shoesize' 要素は単純なコンテンツを持つ複合型を持ちます。'country' 属性を追加することで、単純な型の 'integer' を拡張します。

**XML スキーマの例**

```xml
<?xml version="1.0" encoding="utf-8"?>
<xs:schema targetNamespace="http://www.example.com/" elementFormDefault="qualified" xmlns:tns="http://www.example.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="customer">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="name" type="xs:string"/>
        <xs:element name="shoesize" type="tns:shoesizeType"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="shoesizeType">
    <xs:simpleContent>
      <xs:extension base="xs:integer">
        <xs:attribute name="country" type="xs:string"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema>

```

**XML インスタンスの例**

```xml
<?xml version="1.0" encoding="utf-8"?>
<customer xmlns="http://www.example.com/">
  <name>John Doe</name>
  <shoesize country="GB">8</shoesize>
</customer>

```

Mendix 内の XML マッピングは、エンティティ、属性、関連付けで構成されるドメインモデルに基づいています。 マッピングを作成する際、XSD 要素は一種のオブジェクトモデルに変換されます。 複合型を持つ、または複数回発生する要素は、エンティティにマップされるいわゆる「オブジェクト要素」に変換されます。 単純な型を持ち、一度に一度に発生する要素は、それらを含んでいるオブジェクト要素のエンティティの属性にマップされる 'value 要素' に変換されます。 複合型の XML 属性も、 value 要素に変換されます。

以下のイメージは、前のサンプルの XML スキーマが Mendix 内のマッピングに変換される方法を示しています。 サンプルの 'customer' 要素のための XML からドメインへのマッピングです。 'customer' 要素はオブジェクト要素 (グレーの長方形) に変換されます。 一方、'name' 要素と 'shoesize' 要素と 'country' 属性はマッピング内の値に変換されます。

## 3つの属性

複合型は XML タグ内で発生することのできる属性を指定できます。 これらの属性は常に単純な型を持ち、最大で一度に発生する可能性があります。 属性は両方のマッピングタイプで完全にサポートされています。 属性はマッピング内の value 要素に変換されるため、エンティティの属性にマップすることができます。

## 4つのシンプルなタイプ & シンプルなコンテンツを持つ複雑なタイプ

Mendixは、単純な型や単純なコンテンツを持つ複雑な型といったプリミティブなコンテンツを持つ要素を完全にサポートしています。 しかし、Mendixは現在、単純な型の制限を考慮していません。 例えば、文字列を有限の範囲に制限したり、整数の範囲を制限したりできます。 この場合、基本型の可能なすべての値 (例えば、文字列) が許可されます。

通常、プリミティブコンテンツを持つ要素はマッピング内の値要素に変換されます。 何らかの理由でプリミティブコンテンツを持つ要素がマッピング内のオブジェクト要素に変換された場合、 例えば何度も起こるからです または、属性を定義する複合型があるため、要素の内容は '(Contents)' と呼ばれる追加の値要素に変換されます。

{{% alert type="info" %}}
16進バイナリ型は文字列として認識されるため、16進バイナリ(MTOMアタッチメントなど)に対してバイナリ型の演算は適用できません。
{{% /alert %}}

## 複雑なコンテンツを含む5つの複雑なタイプ

複合コンテンツを持つ複合型を持つ要素の場合、要素の内容は複数の子要素で構成することができます。 の順序と多重度は、choose や sequence などの複数のグループ構造によって定義されます。

## 6 混合コンテンツ

複合型は混在するコンテンツを定義できます。 これは、要素がテキストと子要素の両方をコンテンツとして持つことを意味します。 混合コンテンツは(X)HTMLなどのドキュメントデータで一般的に見られ、構造化データでは一般的ではありません。 現在、混合コンテンツは Mendix ではサポートされていません。
