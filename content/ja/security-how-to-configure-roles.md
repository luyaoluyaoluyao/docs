---
title: "アプリを保護し、機能へのアクセスを設定する"
description: "Mendix Studio でセキュリティを設定する方法を説明します。"
menu_order: 40
tags:
  - "スタジオ"
  - "セキュリティ"
  - "ユーザーの役割"
  - "アプリの保護"
  - "条件付きの可視性"
---

## 1つの紹介

この方法では、アプリのセキュリティ確保、ユーザーロールの作成、特定のユーザーロールの特定のページやマイクロフローへのアクセスを開く方法を説明します。 その結果、エンドユーザーはアクセスできるページのみを表示できます。

**以下の方法を教えてくれます。**

* セキュリティを有効にする
* ユーザーロールを作成
* 特定のユーザーロールの特定のページへのアクセスを設定
* セキュリティ設定をテストする

以下のユースケースについて説明します。

レンタカーアプリを持っているレンタカー会社があります。 お客様はそこに登録してレンタカーを選んでレンタカーのフォームに記入することができます。 フロントデスクのエージェントはレンタカーのフォームと車の詳細にアクセスできます。 お客様とフロントデスクエージェントという2種類のユーザーがいます。 以下の情報にアクセスしてください:

* お客様のプロフィール、車の詳細、レンタカーフォーム
* フロントデスクのエージェント – 車とレンタカーフォームの詳細

このアプリのドメインモデルは、次のようになります。

![ドメインモデル](attachments/security-how-to-configure-roles/domain-model.png)

このアプリには次のページがあります：

* *Home_Web* – すべてのロールによってアクセスされるべきホームページ。 ホームページのボタンは、対応するページを開きます。

    ![ホームページ](attachments/security-how-to-configure-roles/home-page.png)

* *Car_Details* – 車の詳細一覧

* *Car_Rental_Form* – 車を借りるときに記入されたフォーム

* *Personal_Profile* - 詳細を含む顧客のプロフィール


## 2 つの前提条件

この方法を開始する前に、以下の必要条件を完了していることを確認してください:

* ページの用語や基本的な機能をどのように実行するかに慣れます。 詳細については、 [ページ](/studio8/page-editor) を参照してください。
* Studio のセキュリティ、役割、および権限に関する情報に精通してください。 詳細については、 [セキュリティ、ロール & 権限](/studio8/settings-security) を参照してください。
* ドメインモデルの用語に慣れ、基本的な機能を実行する方法を学びます。 詳細については、 [ドメインモデル](/studio8/domain-models) を参照してください。

## 3 セキュリティを有効にしています

アプリの種類とバージョンによっては、まずセキュリティを有効にする必要がある場合があります。 次の操作を行います:

1. アプリの **App Settings** アイコンをクリックします。

2. **ロールと権限** 画面で、 **セキュリティを有効にする** をクリックします。

    {{% image_container width="550" %}}![Enable Security](attachments/security-how-to-configure-roles/enable-security.png){{% /image_container %}}

3. セキュリティが有効になると、次の3つのタブが表示されます: **ロール,** **ページ**, **マイクロフロー**. デフォルトで2つのロールが作成されます: **管理者** と **ユーザー**。 **管理者** のロールは読み取り専用で、削除や名前の変更はできません。 すでに設定されており、すべての機能にアクセスできるため、将来的にはアプリ管理者にこの役割を使用できます。

    To rename the **User** role, click the ellipsis icon next to the **User** role and select **Edit** in the drop-down menu:

    ![ユーザーロール](attachments/security-how-to-configure-roles/user-role.png)

4. **ロール** の編集ダイアログボックスで、 **顧客** に名前を変更し、 **保存** をクリックします。

5. フロントデスクエージェントにロールを追加するには、 **Add Role** ボタンをクリックします。

6. **ロールの作成** ダイアログボックスで、ロール名を **Front_デスク** に入力し、 **Save** をクリックします。

    {{% image_container width="450" %}}![Create Role](attachments/security-how-to-configure-roles/create-role.png){{% /image_container %}}

管理者、顧客、Front_Deskの3つのユーザー ロールが追加されました。

![ロールの作成](attachments/security-how-to-configure-roles/roles-created.png)

## 4 ロールアクセスの管理

ユーザロールの表を見ると、 デフォルトでは、アプリケーションで利用可能なすべてのページとマイクロフローにアクセスできることがわかります。 特定のページへのアクセスを制限するには、次の操作を行います。

1. **ページ アクセス** タブをクリックします。 行内のすべてのページと列内のすべてのロールをリストする行列が表示されます。

2. フロントデスクのエージェントがお客様の個人プロファイルにアクセスすることはできません。 **Personal_Profile** 行の **フロントデスク** 列のチェックボックスを外します。

    ![フロントデスクロールのページアクセス](attachments/security-how-to-configure-roles/page-access-front-desk.png)

よくできました！ ユーザロールのページへのアクセスを設定していること。

## 5あなたのユーザーロールのテスト

特定のページまたはマイクロフローへのアクセスを制限する場合 このページを開いたり、microflow を実行したりするウィジェットは、このロールに自動的に非表示になります。 たとえば、フロントデスクエージェントに顧客個人プロファイルへのアクセス権を与えていない場合などです。 彼らは個人的なプロフィールを開くボタンを見ることはできません。

ページとマイクロフローにアクセス権を設定した後、各ユーザーロールがどのように表示されるかをテストできます。

[デモ ユーザー](/studio8/settings-security#demo-users) で設定したロールは、アプリのプレビュー時にテストできます。 次の操作を行います:

1. **ページ** アイコンをクリックして、 **ロールと権限** 画面を終了します。

2. 右上の **プレビュー** ボタンをクリックして、 [アプリをプレビュー](/studio8/publishing-app)します。

3. アプリがプレビューされたら、画面の右側にあるユーザーアイコンをクリックします。

    ![デモユーザーアイコン](attachments/security-how-to-configure-roles/demo-users-icon.png)

4. 表示されたメニューバーで、デモユーザーを選択すると、アプリが対応するロールの観点から表示されます。 **demo_customer** をクリックして、 **Customer** ロールの表示とアクセスができる機能をテストします。

    {{% image_container width="350" %}}![Select Demo User](attachments/security-how-to-configure-roles/select-user.png){{% /image_container %}}

5. 手順 3-4 を繰り返して、 **Front_デスク** のロールをテストします。

    ![役割のテスト](attachments/security-how-to-configure-roles/testing-roles.png)

6. 右上の **プレビューを閉じる** をクリックしてテストを終了します。

おめでとうございます アプリのさまざまなユーザーロールに対するアクセス権を設定しています。

ボタンが **Front_デスク** ロールから非表示になっていることがわかりますが、コンテナはそうではありません。 条件付き表示を使用して完全に非表示にできます。 詳細については、 [条件付き表示セクション](/studio8/page-editor-widgets-visibility-section) を参照してください。

アプリをプレビューすると、公開後に異なるユーザーロールをテストできます。 エンドユーザーを管理し、ユーザーロールを割り当てることができます。 For more information, see the [Managing App Users](/studio8/settings-security#managing-app-users) section in *Security, Roles & Permissions*.

