---
title: "マイクロフロー"
description: "Mendix Studioでマイクロフローを説明します。"
menu_order: 50
tags:
  - "スタジオ"
  - "マイクロフロー"
---

## 1つの紹介

Mendix Studioには、ボックス(例えば、ボタン)から動作する多くの組み込みロジックがあります。 ただし、カスタムロジックを追加したい場合は、マイクロフローを作成する必要があります。

マイクロフローズは、伝統的にテキストプログラムコードで終わるものを視覚的に表現する方法です。  マイクロフローは、ページの作成や変更、選択肢の作成などのアクションを実行できます。

以下の場合にはマイクロフローを使用する必要があります。

*  ボタンの標準動作を変更/拡張する
* アプリケーションにカスタムロジックを追加するには
* 他のシステム、データベース、Webサービスなどと統合する。

以下に、マイクロフローを使用する例を示します。

*  ユーザーが入力した値をチェックし、ユーザーにエラーメッセージまたは別のページを表示します。
*  To-Doリストを作成しており、リスト上のアイテムのステータスが変更されたときにカスタムロジックを使用します。

Studio でアプリケーションのマイクロフローを表示するには、左側のメニューバーの **Microflow** アイコンをクリックします。

{{% image_container width="300" %}}![マイクロフローアイコン](attachments/microflows/micflows-icon.png)
{{% /image_container %}}

## 2 概念と定義

マイクロフローはフローチャートのようなものです。 新しいマイクロフローでは、開始イベント(緑色のドットで表されるマイクロフローの開始点)と終了イベント(赤色のドットで表されるマイクロフローの終了点)がデフォルトで存在します。 また、シーケンスフロー(矢印付きの行)によっても接続され、新しいイベントやアクティビティを追加できます。 詳細については、 [3 新しいマイクロフロー](#creating-new-microflow) の作成 を参照してください。 Mendix Assistがオンになっている場合、中央に青い点で表されます。 詳細については、 [Mendix Assists](mx-assist) を参照してください。

![新しいマイクロフロー](attachments/microflows/new-microflow-created.png)

マイクロフローの構成を開始する前に、マイクロフローエディターが使用する概念と概念について理解してください。

| コンセプト   | 説明                                                                                                                                                                                                                                                                |
| ------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| アクティビティ | さまざまな機能を実行する青いボックス。 たとえば、アクティビティの助けを借りて、ユーザーにホームページを表示できます。 詳細については、 [5 Toolbox](#microflows-toolbox) セクションを参照してください。                                                                                                                                             |
| フロー     | マイクロフローイベントとアクティビティを接続する矢印。 詳細については、 [6 フロー](#flows) セクションを参照してください。                                                                                                                                                                                              |
| イベント    | 青い箱の形ではないフローに置かれた他のものはイベントです。 決定はイベントの一例です。 詳細については、 [5.1 一般](#microflow-general-section) のセクションを参照してください。                                                                                                                                                        |
| 変数      | 変数は、データのための一時的なストレージです。 変数は、情報を保存し、必要に応じて参照するために使用されます。 この目的のための変数には一意の名前が必要です。 <br />マイクロフローでは、変数を追加し、値を割り当てて、それをマイクロフローのアクティビティで使用できます。 必要に応じて後でこの値を変更できます。 例えば、変数 **$Discount** を作成し、値 0.5 を割り当て、顧客の価格を計算することができます。 <br />変数を作成したマイクロフローでのみ使用できます。 |
| パラメータ   | パラメータにはグローバル変数が含まれています。つまり、異なるマイクロフローで同じパラメータを使用できます。                                                                                                                                                                                                             |

## 3 新しいマイクロフローの作成 {#creating-new-microflow}

新しいマイクロフローを作成し、マイクロフローの構築を開始するには、次の操作を行います。

1. 左のメニューバーの **Microflow** アイコンをクリックします。
2.  **Microflow** サイドパネルの **New** をクリックします。

    {{% image_container width="350" %}}![新しいマイクロフローの追加](attachments/microflows/new-microflow.png)
    {{% /image_container %}}

3.  ポップアップダイアログでマイクロフローの名前を入力し、 **作成** をクリックします。

    ![新しいマイクロフローダイアログを作成](attachments/microflows/new-microflow-dialog.png)

新しいマイクロフローが作成され、イベントやアクティビティを追加することでロジックを追加できるようになりました。

## 4 新しいイベントやアクティビティを追加する {#adding-activity-to-microflow}

マイクロフローに新しいアクティビティまたはイベントを追加するには、次の手順を実行します。

1. イベントまたはアクティビティを追加するマイクロフローを開きます。
2. **Toolbox** タブを開きます。
3. **General**, **Object Activities** または **Client Activities** セクションでイベントまたはアクティビティを選択します。
4. イベントやアクティビティをマイクロフローにドラッグ&ドロップします。

## 5ツールボックス {#microflows-toolbox}

**Toolbox** タブでは、マイクロフローに異なる要素とアクティビティを含む3つのセクションが含まれていることがわかります。

* [全般](#microflow-general-section)
* [オブジェクトのアクティビティ](#microflow-object-activities)
* [クライアントのアクティビティ](#microflow-client-activities)

### 5.1 全般 {#microflow-general-section}

{{% image_container width="300" %}}![マイクロフローの一般プロパティ](attachments/microflows/microflows-general-properties.png)
{{% /image_container %}}

**一般** セクションで利用可能な要素については以下の表を参照してください。

| 要素                        | 説明                                                                                                                                                                                                             |
| ------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 注釈                        | 注釈は、コメントをマイクロフローに置くために使用できる要素です。                                                                                                                                                                               |
| 休憩イベント                    | break イベントはループ内で使用されるのは、オブジェクトのリストの反復を停止し、マイクロフロー内の残りのフローを継続するためだけです。 詳細については、 [Studio Pro Guide](/refguide/break-event) の *イベントを破壊する* を参照してください。                                                              |
| イベントを続ける                  | continue イベントは、現在の反復を停止し、次のオブジェクトの反復を開始するためにのみループで使用されます。 詳細については、 [Studio Pro ガイド](/refguide/continue-event) の *イベント* を参照してください。                                                                              |
| イベントを終了                   | endイベントは、マイクロフローが停止する場所を定義します。 たとえば、 **Decision** がマイクロフローで使用されている場合など、複数のエンドイベントが存在する可能性があります。 したがって、エンドイベントの数は、マイクロフローの可能な結果の数に依存します。 詳細については、 [Studio Pro Guide](/refguide/end-event) の *イベント終了* を参照してください。 |
| [決定](microflows-decision) | 条件を追加したい場合は、そのフローを分割します。 たとえば、異なる成績を持つ顧客に異なる注文フォームを表示する場合です。 <br />この要素は条件に基づいており、複数の流出フローをもたらします。 マイクロフローは、条件をチェックし、フローの1つに従います。                                                                        |
| [ループ](microflows-loop)    | ループは、オブジェクトのリストを反復処理し、リストの各項目に対してアクションを実行するために使用されます。 たとえば、データベースから注文のリストを取得し、次にこのリストをループし、処理済みとして注文をマークできます。                                                                                                  |
| 結合                        | マージは、フローを1つに結合するために使用できます。  以前にマイクロフローを分割した場合 (例えば、 これらの分離されたフローに対して同じアクションを実行する必要があります マージを使用して、2 つのパス(またはそれ以上)を結合できます。 For more information, see [Merge](/refguide/merge) in the *Studio Pro Guide*.         |
| パラメータ                     | パラメータはマイクロフローの入力データであり、マイクロフロー内の任意のアクティビティで使用できます。 詳細については、 [Studio Pro Guide](/refguide/parameter) の *パラメータ* を参照してください。                                                                                       |

### 5.2 オブジェクトアクティビティ {#microflow-object-activities}

{{% image_container width="350" %}}![Microflow Object Activity](attachments/microflows/object-activities.png)
{{% /image_container %}}

**オブジェクトアクティビティ** は以下の表に記述されています。

| アクティビティ   | 説明                                                                                                                                                                                                                                                                       |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 集計リスト     | **集計リスト** は、最大値などの集計値を計算するために使用できます。 データオブジェクトのリスト上のオブジェクトの最小、合計、平均、および合計の量。 For more information, see [Aggregate List](/refguide/aggregate-list) in the *Studio Pro Guide*.                                                                                             |
| オブジェクトの変更 | このオブジェクトの既存のデータオブジェクトまたはプロパティを変更するために使用できます。 詳細については、 [Studio Pro ガイド](/refguide/change-object) の *オブジェクトの変更* を参照してください。                                                                                                                                                 |
| コミット      | **コミット** はまだデータベースに保存されていない変更を保存します。 For more information, see [Commit](/refguide/committing-objects) in the *Studio Pro Guide*.                                                                                                                                         |
| オブジェクトを作成 | **オブジェクトの作成** アクションは、データオブジェクトの作成に使用できます。 詳細については、 [Studio Pro ガイド](/refguide/create-object) の *オブジェクトの作成* を参照してください。                                                                                                                                                    |
| 削除        | **Delete Object** を使用すると、1 つのデータオブジェクトやオブジェクトのリストを削除できます。 詳細については、 [Studio Pro ガイド](/refguide/deleting-objects) の *削除* を参照してください。                                                                                                                                        |
| 保留する      | **Retrieve** can be used to get one or more objects, either by directly traversing an [association](domain-models-association-properties) of another object, or by retrieving objects from the database. 詳細については、 [Studio Pro ガイド](/refguide/retrieve) の *取得* を参照してください。 |

### 5.3 クライアントアクティビティセクション {#microflow-client-activities}

![Microflow Client Activities](attachments/microflows/client-activities.png)

**クライアント アクティビティ** は以下の表に記載されています。

| アクティビティ   | 説明                                                                                                                                                                                                                                                        |
| --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ページを閉じる   | このアクティビティは現在開いているページを閉じます。 詳細については、 [Studio Pro ガイド](/refguide/close-page) の *ページを閉じる* を参照してください。                                                                                                                                                         |
| ホームページを表示 | **Show Home Page** アクションは、現在のユーザーのホームページに移動します。 ユーザーがログインしてロールベースのホームページを参照した後に行うのと同じページに移動します。 詳細については、 [Studio Pro Guide](/refguide/show-home-page) の *ホームページを表示する* を参照してください。 <br />ホームページの設定については、 [Navigation Document](navigation) を参照してください。 |
| メッセージを表示  | **メッセージを表示する** アクションを使用すると、ユーザーにブロックまたは非ブロックメッセージを表示できます。 (非ブロックメッセージでは、ユーザーはポップアップを開いてアプリ内で作業を続けることができます。 ブロックメッセージでは、ポップアップウィンドウが閉じられるまでユーザーは作業を継続できません。 ) 詳細については、 [Studio Pro ガイド](/refguide/show-message) の *メッセージ* を参照してください。                       |
| ページを表示    | この操作で、エンドユーザーにページを表示できます。 詳細については、 [Studio Pro Guide](/refguide/show-page) の *ページ* を参照してください。                                                                                                                                                             |

### 5.4 可変アクティビティ

![マイクロフロー変数のアクティビティ](attachments/microflows/variable-activities.png)

**可変アクティビティ** は以下の表に記載されています:

| アクティビティ | 説明                                                                                                                                                                   |
| ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 変数の変更   | このアクティビティは、現在のマイクロフロー内の既存の変数の値を変更するために使用されます。 詳細については、 [Studio Pro Guide](/refguide/change-variable) の *変数の変更* を参照してください。                                            |
| 変数を作成   | このアクティビティを使用すると、変数を作成して値を割り当てることができます。 変数は、マイクロフローのアクティビティで値を保存、変更、および再利用するために使用することができます。 詳細については、 [Studio Pro ガイド](/refguide/create-variable) の *変数の作成* を参照してください。 |

たとえば、最初に、 *Discount* という名前の変数をマイクロフローに作成できます。 をクリックし、変数を変更します。割引は、顧客の成績の種類によって異なります。 ゴールドとシルバーの成績を持つ顧客に割引を与えることができます。

{{% image_container width="400" %}}![マイクロフローの例](attachments/microflows/example-of-using-var-activities.png)
{{% /image_container %}}

## 6つのフロー {#flows}

フローは要素を接続する線です。 以下の表にフローの説明があります。

| フロー      | 画像                                                    | 説明                                                                                                                                  |
| -------- | ----------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| シーケンスフロー | ![シーケンスフロー](attachments/microflows/sequence-flow.png) | シーケンス フローは、イベント、アクティビティ、決定、および互いに結合する矢印です。 従って、実行の順序を定義する。 フローは常に、要素が一つずつ実行される方向に流れます。 決定は常に一方向につながるので、マイクロフローは同時に2つの流れを追うことができません。 |
| 注釈フロー    | ![注釈フロー](attachments/microflows/annotation-flow.png)  | 注釈フローは、注釈をフローオブジェクトにリンクするために使用できる接続です。                                                                                              |

## 7つのアクティビティアイコン

マイクロフローのアクティビティを設定すると、アクティビティの上または下にアイコンが表示されます。 以下の表にアイコンの説明があります。

| 名前          | 画像の例                                                                  | 説明                                                                                                                        |
| ----------- | --------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- |
| エンティティ      | ![エンティティアイコン](attachments/microflows/entity-icon.png)                 | アクティビティのデータソースがエンティティであることを示します。                                                                                          |
| 値           | ![値アイコン](attachments/microflows/simple-value-icon.png)                | アクティビティのデータソースが10進数、ブール値、日付、時刻などの単純な値であることを示します。                                                                          |
| コミット        | ![コミットアイコン](attachments/microflows/commit-icon.png)                   | オブジェクトがコミットされることを示します。 コミットは、変更がデータベースに保存されることを意味します。 例えば、これは役に立ちます。 オブジェクト *新規顧客* を保存し、顧客に関する情報を含むテーブルに更新したい場合。          |
| イベントなしでコミット | ![イベントなしでコミット](attachments/microflows/commit-with-no-events-icon.png) | オブジェクトはコミットされますが、イベントはありません。 つまり、オブジェクトはデータベースに保存されますが、イベントハンドラはトリガーされません。 例えば、新規顧客に関する情報は保存されますが、新規顧客に関する情報を含む表は更新されません。 |
| クライアントで更新   | ![クライアントアイコンで更新](attachments/microflows/refresh-in-client-icon.png)   | アクティビティの結果がエンドユーザーに表示されることを示します。                                                                                          |

## 8 続きを読む

* [一般情報](general)
* [決定](microflows-decision)
* [マイクロフロー式](microflows-expressions)
* [Set & Change a value for different activities in the Microflow](microflows-setting-and-changing-value)
