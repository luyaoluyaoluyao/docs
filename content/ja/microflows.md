---
title: "マイクロフロー"
parent: "application-logic"
menu_order: 10
description: "マイクロフローで使用できるすべての要素の概要を表示します。"
---

## 1つの紹介

{{% alert type="info" %}}

このページは、マイクロフローで使用できるすべての要素の概要です。 マイクロフロー自体のプロパティについては、 [Microflow Properties](microflow) を参照してください。

{{% /alert %}}

マイクロフローを使用すると、アプリケーションのロジックを表示できます。 マイクロフローは、オブジェクトの作成や更新、ページの表示、選択肢の作成などのアクションを実行できます。 それは、伝統的にテキストプログラムコードで終わるものを視覚的に表現する方法です。

## 2つのキーボードサポート

マイクロフローエディタは、マイクロフローのナビゲートと操作のためのキーボードサポートを提供します。 次の表は、使用可能なキーを示しています。

| キー                        | 効果                                              |
| ------------------------- | ----------------------------------------------- |
| 矢印キー                      | 矢印方向の近くの要素 (アクティビティ、イベント、ループ、またはパラメーター) を選択します。 |
| Enter                     | 選択した要素のプロパティを編集します。                             |
| F2                        | 選択した要素によって導入される変数の名前を変更します。                     |
| Shift + F2 または入力を開始してください | 選択した要素のキャプションを編集します。                            |
| Ctrl+矢印キー                 | 選択した要素を矢印の方向に移動します。                             |
| Tab                       | ループが選択されている場合、ループ内の最初の要素が選択されます。                |
| (Shift) + (Tab)           | ループ内の要素が選択されている場合、ループ自体が選択されます。                 |
| ホーム                       | 開始イベントを選択します。                                   |
| 終了                        | 終了イベントをサイクルします。                                 |
| コンテキストメニューキーまたはShift-F10  | 現在選択されている要素のコンテキストメニューを開きます。                    |

## 3つの表記法

マイクロフローのグラフィカル表記は、 [Business Process Model and Notation](https://en.wikipedia.org/wiki/Business_Process_Model_and_Notation) (BPMN) に基づいています。 BPMN は、ビジネスプロセスをワークフローで描画するための標準化されたグラフィカル表記です。

マイクロフローは要素で構成されています。 以下は、すべての要素のカテゴリ概要です。 以下のカテゴリが使用されます：

*   [イベント](#events) は、ループにおけるマイクロフローと特殊な操作の開始点と終了点を表します。
*   [フロー](#flows) が要素間の接続を形成します。
*   [ゲートウェイ](#gateways) は、選択を行い、異なるパスを再びマージすることに対処します。
*   [アクティビティ](#activities) は、マイクロフローで実行されるアクションです。
*   [アーティファクト](#artifacts) は入力とともにマイクロフローを提供し、コメントを作成できるようにする。
*   [エラーハンドラ](#errorhandlers) は、エラーの処理方法を定義するために、アクティビティ、ゲートウェイ、またはループに設定することができます。

## 4つのイベント<a name="events"></a>

イベントは、ループにおけるマイクロフローの開始点と終了点を表します。

| グラフィック                                               | 名前                         | 説明                                                                                                      |
| ---------------------------------------------------- | -------------------------- | ------------------------------------------------------------------------------------------------------- |
| [![](attachments/819203/917902.png)](start-event)    | [イベントを開始](start-event)     | 開始イベントは、マイクロフローの開始点です。 マイクロフローは、1 つの開始イベントしか持つことができません。                                                 |
| [![](attachments/819203/918113.png)](end-event)      | [イベントを終了](end-event)       | endイベントは、マイクロフローが停止する場所を定義します。 場合によっては、マイクロフローの戻り値を指定する必要があります。 複数のエンドイベントが存在する可能性があります。                |
| ![](attachments/16713739/16843951.png)               | [エラーイベント](error-event)     | error イベントは、microflow が停止し、以前に発生したエラーをスローする場所を定義します。 マイクロフローを呼び出す場合は、マイクロフロー内でエラーが発生したかどうかを知りたい場合があります。 |
| [![](attachments/819203/918115.png)](continue-event) | [イベントを続ける](continue-event) | continue イベントは、ループの現在の反復を停止し、次の反復を続行するために使用されます。 継続イベントは [ループ](loop)内でのみ使用できますのでご注意ください。                |
| [![](attachments/819203/918026.png)](break-event)    | [休憩イベント](break-event)      | break イベントは、オブジェクトのリストの反復を停止し、ループの後に残りのフローを継続するために使用されます。 ブレークイベントは [ループ](loop)内でのみ使用できますのでご注意ください。     |

## 5つのフロー<a name="flows"></a>

フローは要素間の接続を形成します。

| グラフィック                                                | 名前                        | 説明                                                                           |
| ----------------------------------------------------- | ------------------------- | ---------------------------------------------------------------------------- |
| [![](attachments/819203/917883.png)](sequence-flow)   | [シーケンスフロー](sequence-flow) | シーケンス フローは、イベント、アクティビティ、分割、および互いにマージをリンクする矢印です。 彼らは一緒にマイクロフロー内の実行の順序を定義しました。 |
| [![](attachments/819203/917688.png)](annotation-flow) | [注釈フロー](annotation-flow)  | 関連付けは、注釈を別の要素に接続するために使用できる接続です。                                              |

## 6つのゲート<a name="gateways"></a>

ゲートウェイは選択肢を作ることと異なるパスを再度マージすることを取り扱います..

| グラフィック                                                | 名前                        | 説明                                    |
| ----------------------------------------------------- | ------------------------- | ------------------------------------- |
| [![](attachments/819203/917726.png)](exclusive-split) | [排他的な分割](exclusive-split) | 排他的な分割は、条件に基づいて決定を行い、発信フローの1つだけに従います。 |


**注**: マイクロフローに並列実行はありません。 | | [![](attachments/819203/918122.png)|](inheritance-split) | [継承分割](inheritance-split) | 継承分割は、選択したオブジェクトの [特殊化](entities) に基づいて選択を行う要素です。 [Cast Object](cast-object) アクションを使用して、特殊なオブジェクトに名前を付けることができます。 | | [![](attachments/819203/918116.png)|](merge) マージ [| マージ](merge) | マージは複数のシーケンスフローを1つに結合するために使用することができます。 マイクロフローで選択が行われ、その後、いくつかの一般的な作業が行われる必要があります。 マージを使用して、2 つのパス(またはそれ以上)を結合できます。 |

## 7つのアクティビティ<a name="activities"></a>

アクティビティは、マイクロフローで実行されるアクションです。

| グラフィック                                        | 名前                 | 説明                                                                                                                                                                           |
| --------------------------------------------- | ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [![](attachments/819203/918096.png)](アクティビティ) | [アクティビティ](アクティビティ) | アクティビティは、マイクロフロー内で特定のアクションを実行するために使用できます。                                                                                                                                    |
| [![](attachments/819203/917804.png)](ループ)     | [ループ](ループ)         | ループされたアクティビティは、オブジェクトのリストを繰り返すために使用されます。 オブジェクトごとに、ループされたアクティビティ内のフローが実行されます。 ループされたアクティビティには、開始イベントと停止イベントを除き、マイクロフローで使用されるすべての要素を含めることができます。 フローは、最初の要素から開始され、フローは入力されません。 |

## 8 人工物<a name="artifacts"></a>

アーティファクトは、入力とマイクロフローを提供し、コメントを作成することができます。

| グラフィック                                         | 名前             | 説明                                                              |
| ---------------------------------------------- | -------------- | --------------------------------------------------------------- |
| [![](attachments/819203/918019.png)](パラメータ)    | [パラメータ](パラメータ) | パラメータは、マイクロフローの入力として機能するデータです。 パラメータは、マイクロフローがトリガーされる場所に入力されます。 |
| [![](attachments/819203/917689.png)](アノテーション:) | [注釈](アノテーション:) | 注釈は、コメントをマイクロフローに置くために使用できる要素です。                                |

## 9種類の変数の使用

モデラーは、選択したオブジェクトによって使用される変数を視覚化します。 これは、使用されている変数を青色の背景に白のテキストで表示することによって行います。 逆に、選択したオブジェクトによって定義された変数を使用する要素には、緑色の背景に白いテキストで「Usage」という単語が表示されます。

以下の例では、選択したアクティビティで使用されているため、パラメータ **AccountPasswordData** がハイライトされます。 そして、アクティビティ **パスワードを保存** には、選択したアクティビティによって定義された変数を使用するための使用ラベルがあります。

![](attachments/16713739/16843950.png)

## 10 エラー

マイクロフローでエラーが発生すると、オブジェクトに加えられたすべての変更がロールバックされ、マイクロフローが中断されます。 必要に応じて、さまざまなエラー処理設定を構成することで、マイクロフロー自体のエラーを処理できます。 定義済みの変数 `$latestError` と `$latestSoapFault` を調べることで、エラーの詳細を調べることもできます。

### 10.1 Error Handler<a name="errorhandlers"></a>

エラーハンドラは、アクティビティ、ゲートウェイ、またはループで設定できます。 アクティビティまたはゲートウェイでは、3つのオプションがあります。

*   Rollback (default)
*   ロールバックでカスタム
*   ロールバックせずにカスタム

後者の2つのオプションでは、ブロックから追加のフローを描画し、このフローをエラーハンドラのフローとしてマークすることができます。 'Custom with rollback' を選択すると、エラーが発生し、その後もオブジェクトをロールバックしたときにこのパスがトリガーされます。 'Custom without rollback' オプションは、オブジェクトをロールバックしません。 フローをエラーハンドラとして選択すると、次の画像のように表示されます。

![](attachments/819203/918247.png)

ループでは、2 つのオプションがあります。

*   Rollback (default)
*   続ける

continue オプションは、エラーが発生した場合、ループは単に次の反復に続くことを意味します。 ループの終了時に、継続アイコンとして表示されます。

![](attachments/819203/918246.png)

### 10.2 エラーの検査

マイクロフロー内でエラーが発生すると、発生したエラーに関する情報が含まれた Java 例外が発生します。 カスタムエラーハンドラの中（エラー処理フローの後） このJava例外のタイプとその他のいくつかのプロパティを調べることができます。 各マイクロフローには、2つの事前定義されたエラー変数 `$latestError` と `$latestSoapFault` が含まれています。 `$latestError` はエンティティSystem.Errorのオブジェクトで、 `$latestSoapFault` はエンティティSystem.SoapFaultのオブジェクトであり、これはSystem.Errorの専門化です。

エラーが発生した後に実行されるカスタムエラーハンドラで。 `$latestError` は発生したエラーに関する情報を含むオブジェクトに設定されています。 エラーが SOAP 障害である場合 (Web サービス コールの結果として発生するエラー) `$latestSoapFault` は SOAP 障害に関するより具体的な情報を含むオブジェクトに設定されます。 それ以外の場合、 `$latestSoapFault` は `空` です。

{{% alert type="success" %}}

`$latestSoapFault` の空 `をチェックすることで、エラーが SOAP 障害であったかどうかを確認できます。`.

{{% /alert %}}

次の表は、System.Error および System.SoapFault の属性を示しています。

| エンティティ           | 属性        | タイプ | 説明                 |
| ---------------- | --------- | --- | ------------------ |
| System.Error     | ErrorType | 文字列 | 発生したエラーのJava例外タイプ。 |
| System.Error     | メッセージ     | 文字列 | Java例外のメッセージ。      |
| System.Error     | スタックトレース  | 文字列 | Java例外のスタックトレース。   |
| System.SoapFault | コード       | 文字列 | SOAP 障害のコード 要素。    |
| System.SoapFault | 理由：       | 文字列 | SOAP 障害の Reason 要素 |
| System.SoapFault | ノード       | 文字列 | SOAP 障害の Node 要素   |
| System.SoapFault | ロール       | 文字列 | SOAP 障害のロール要素      |
| System.SoapFault | 詳細        | 文字列 | SOAP 障害の Detail 要素 |

SOAP 障害の詳細については、 [ここ](http://www.w3.org/TR/soap12-part1/#soapfault) をクリックしてください。

{{% alert type="warning" %}}

エンティティアクセスを適用するマイクロフローでは、セキュリティ上の理由からエラーオブジェクトの属性を検査することはできません。 error オブジェクトをエンティティアクセスを適用せず、そこで属性を検査するサブマイクロフローに渡すことができます。

{{% /alert %}}

## 11 マイクロフローのデバッグ

マイクロフローの実行中に何が起こるかを見たい場合は、microflow デバッガを使用できます。 次の方法を参照してください。

*   [マイクロフローのデバッグ](/howto7/monitoring-troubleshooting/debug-microflows)
*   [マイクロフローのデバッグ](/howto7/monitoring-troubleshooting/debug-microflows-remotely)
