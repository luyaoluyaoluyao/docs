---
title: "公開されたOData Services"
parent: "統合"
aliases:
  - /ja/refguide7/consed-odata-services.html
---

## 1つの紹介

モデラーでは、新しい公開された OData サービスを追加することで、エンティティを [OData リソース](published-odata-resource) として公開することができます。 公開された OData サービスには、任意の数の関連リソースを公開できます。 デフォルトでは、エンティティの非修飾名は一意に識別するために URI 内で使用されます。 でもリソースの名前も上書きできます

## 2 OData Version

Mendix の OData で使用される標準は [OData バージョン 3](http://www.odata.org/documentation/odata-version-3-0)で、Atom XML にデフォルトの表現が設定されています。 標準のすべての部分が実装されているわけではありません。 何かがここで文書化されていない場合は、まだ追加されていません。

## 3つのクエリオプション

OData レスポンスをフィルタリングする方法については、 [OData Query Options](odata-query-options) を参照してください。

## 4つのサポートされているタイプ

Mendix 属性が OData でどのように表現されるかについては、 [OData 表現](odata-representation) を参照してください。

## 5つのサービス名

サービス名は、OData サービスの固有の URI を作成するために使用されます。 従って、サービス名は [RFC 3986](https://tools.ietf.org/html/rfc3986) および [RFC 3987](https://tools.ietf.org/html/rfc3987) に従って整形されるべきです。

## 6つのリソース

[リソース](published-odata-resource) は、URI によって識別されるエンティティを表すネットワークアクセス可能なデータオブジェクトです。 リソースと固有の識別子を **リソース** タブから追加、編集、または削除できます。

## 7つのサービス名前空間

OData では、名前空間はデータ型を参照するために使用されます。 **設定** タブで、この名前空間をカスタマイズできます。 文字、数字、またはドットで始まる任意の値に変更できます。最大長は 512 文字です。

## 8 パフォーマンス

OData を介してエンティティを公開するとき、エンティティはストリーミング方法で Mendix データベースから取得され、Mendix ランタイムでメモリ不足のエラーを回避します。

## 9つの関連

関連付けを表す方法を選択できます。 詳細については、 [OData 表現](odata-representation#associations) の *Associations* セクションを参照してください。

## 10 セキュリティ

MendixでODataを消費できるようにする 2種類のアクセス権が必要です。OData サービスへのアクセス権と、取得する特定のエンティティへのアクセス権があります。 アクセスは、ユーザとしての認証または、関連付けられたユーザロールが OData サービスとエンティティの両方にアクセスできる限り、匿名ユーザを介して許可されます。

### 10.1 認証済みアクセス

認証は、呼び出しの HTTP ヘッダーに基本的な認証を含めることによって行うことができます。 これを行うには、 **Authorization** というヘッダを構築する必要があり、その内容は以下のように構成される必要があります。

1.  ユーザー名とパスワードは文字列 "username:password" に結合されます
2.  結果として生成される文字列は Base64 の [RFC2045-MIME](https://tools.ietf.org/html/rfc2045) variant を使って符号化されます(ただし76文字/行に限定されない)。
3.  認可方法と単一のスペース (つまり、「Basic 」はエンコードされた文字列の前に置かれます)。

この結果は、 `Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==` のようなヘッダです。

### 10.2 匿名アクセス

プロジェクトのセキュリティが有効になっている場合でも、OData リソースは匿名ユーザにさらされる可能性があります。 匿名ユーザを許可する方法についての詳細は、 [匿名ユーザロール](anonymous-users) を参照してください。

### 10.3 プロジェクトセキュリティオフ

プロジェクトのセキュリティがオフの場合、デバッグ目的で、認証を必要とせず、セキュリティを適用せずにすべてのデータを取得できます。 これは生産環境では不可能です。

### 10.4 ロールベースのアクセス

セキュリティが有効になっている場合、特定の OData サービス文書へのアクセス権限を持つユーザを設定する必要があります。 これは、特定の公開済みの OData サービスドキュメントを開くことによって行うことができます。 format@@0 タブに移動し、format@@1 セクションで許可されているロールを変更します。 デフォルトでは、許可されたユーザーロールは選択されていません。 セキュリティ設定は [モジュールセキュリティ](module-security)に反映されます。

![](attachments/16713721/16843927.png)

### 10.5 セキュリティの仕組み

1.  通常、クライアントは最初の匿名リクエストを発行します。 その後、匿名要求が OData サービスに対して検証されます。 匿名アクセスがそれぞれの OData サービスに許可されていない場合 サーバはエラーコード 401 (Unauthorized) で返され、レスポンスには WWW-Authenticate ヘッダーが含まれ、クライアントにベーシック認証で認証するように指示します。
2.  クライアントが正しい資格情報を提供できなかった場合、または基本的な認証を提供しなかった場合。 サーバは、前のステップと同様に、エラーコード 401 (不正) と WWW-Authenticate ヘッダーを返します。
3.  クライアントにアクセス権が与えられた場合 (匿名または基本的な認証のいずれか) クライアントアクセス権は、OData リソースのセキュリティ設定に対してチェックされます。 アクセス可能なすべてのリソースは、 `/$metadata` が追加されたサービスのルート URL の下で使用可能なメタデータ XML ドキュメントで説明されます。
4.  クライアントが OData サービスを呼び出すたびに、サービスの説明であるかどうかにかかわらず。 またはメタデータやリソース認証情報が再評価されます

### 11 API ドキュメント

OData対応アプリケーションが実行されると、公開された OData リソースの概要がルート URL に続いて `/odata-doc/` で確認できます。 例えば、 `http://localhost:8080/odata-doc/` OData リソースと Excel の間のリンクを作成するには、リンクをコピー&ペーストします。

{{% alert type="warning" %}}
OData リソースの API ドキュメントはデフォルトで有効になっていますが、本番環境で実行されているアプリのアクセスは管理者によって制限される場合があります。
{{% /alert %}}
