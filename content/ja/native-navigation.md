---
title: "ネイティブナビゲーション"
parent: "native-Mobile"
menu_order: 11
tags:
  - "モバイル"
  - "navigation"
  - "ネイティブ"
  - "iOS"
  - "Android"
---

## 1つの紹介

ネイティブのモバイルアプリをWebアプリケーションと同様の方法でモデル化しますが、 ネイティブモバイルアプリのナビゲーションの一部は、Webアプリケーションとは異なります。 このガイドでは、それらのナビゲーションの違いについて説明します。

### 1.1 ウェブアプリ

一般的に、Web アプリでは、いつでも開いているページは 1 つしかありません。 これは、ページを開くときに、前のページが新しいページに置き換えられるためです。 戻ると、開始したページが再び読み込まれ、現在のページが置き換えられます。 このページ読み込みパターンはパフォーマンスを低下させます。

### 1.2 ネイティブモバイルアプリ

ネイティブ モバイル アプリでは、ページはデフォルトで開いたままになります。 これにより、スクロール位置やアクティブなタブ情報など、以前のページの状態を保持しながら(たとえば、戻るボタンをタップしたりスワイプしたりして)即座に戻ることができます。 これにより、アプリのユーザーエクスペリエンスに大きなメリットがあります。 しかし、モバイルアプリを開発する際には、オープンページを考慮することをお勧めします。 具体的には、一度に開くページが多すぎないことを確認してください(パフォーマンスが悪くなります)。 そのデータは必要に応じて更新されます これらの目的を達成するために、Mendixは正確なナビゲーションフローを詳細に制御できます。

## 2種類のレイアウトタイプ

### 2.1 デフォルト

デフォルトのレイアウトを持つページを開いた後、ヘッダーの戻るボタンを使用して前のページに戻ることができます。 デバイスの戻るボタン(Android用)、または画面の左側(iOS用)からスワイプします。 アプリのホームページが開いたら、Androidの戻るボタンを押してアプリを閉じます。

### ポップアップ2.2

ポップアップレイアウトのあるページは、デフォルトのページのようになります。 しかしそれは別個のアニメーションで現れ、バックアイコンの代わりに近いアイコンがあります。 iOSでは、ポップアップの上から下にスワイプして閉じることもできます。 Androidでは、デバイスの戻るボタンを使用して閉じることができます。 ポップアップは下部のバーを持つことはできません。 ポップアップレイアウトのあるページは、デフォルトのホームページとして使用することも、下部のバーに追加することもできません。

ポップアップは、特定のコンテキストで入力を求めるときに非常に便利です。 たとえば、QRコードをスキャンする必要がある場合はうまく動作します。 また、ウィザード(複数ステップのフォーム)も簡単になります。 前のステップに戻り、プロセスが完了し、すべてのポップアップが閉じられるまで変更できるように。

## 3 ナビゲーション関連のレイアウトコンポーネント

ネイティブレイアウトには、ネイティブアプリで最も一般的なパターンを有効にする便利なプロパティがあります。

### 3.1 ヘッダー

ヘッダープロパティが有効になっているレイアウトは、常に画面上部にバーを表示します。 ヘッダーは以下の3つの部分で構成されています:

* 左部：設定できませんが、レイアウトの種類に応じて背面アイコンまたは近いアイコンを表示できます
* 中央部: ページのタイトルを表示
* 右部分：ウィジェットで設定可能で、ボタンを含むためによく使用されます

これは、iOS のデフォルトヘッダーの例です。

{{% image_container width="250" %}}![An example of the default header on iOS.](attachments/native-navigation/header.png){{% /image_container %}}

### 底部バー 3.2

ネイティブ ナビゲーション プロファイルに下部のバー項目を追加できます。 これらの項目は、下部バープロパティが有効なレイアウトのあるページに表示されます。

下部のバーのすべての項目に独自のナビゲーション スタックがあります。 つまり、最初のタブで数ページを開いた場合には、 次に2番目のタブに切り替えて1番目のタブに戻ります あなたの最初のタブのページは開いているあなたがそれらを残したように。

{{% alert type="warning" %}}
ボトムバーのないページは別のスタックに作成されます。 ページ *から下部のバー* を指定せずに *ページに移動した場合、下部のバーが* で表示されます。 スタック内のすべてのページが閉じられます
{{% /alert %}}

{{% image_container width="250" %}}![An example of the default bottom bar on iOS.](attachments/native-navigation/bottombar.png){{% /image_container %}}

## 4 Mendixネイティブナビゲーションはどのように機能しますか?

デフォルトでは、より良いユーザーエクスペリエンスを提供するためにページを開いたままにします。 しかし、アプリケーションが優れたパフォーマンスと論理的な流れを持つためにも、それらを正しく管理する必要があります。

### 4.1 スタック

ページを開いたままにするために、ナビゲーションシステムは複数のページを使用します。 モバイルアプリは同時に複数のスタックを含めることができます。 スタックはカードの山と比較することができます:あなたは上にカードを追加することができ、あなたは上からカードを削除することができます。

#### 4.1.1 シングルスタック

アプリがボトムバーを使用していない場合は、1つのスタックがあります。 この状況は、最も密接にウェブ上のナビゲーションに似ています。 ただし、 スタック内のすべてのページは明示的に閉じるか戻るボタンを押すまで開いたままにしておくことが重要です

スタックの最初のページは、常にホームページです。 ページを開くボタンをタップすると、スタックに2ページが表示されます。

(戻るボタン、閉じるアクション、またはスワイプして戻る) ページを閉じたとき、 現在のページだけが閉じられ、前のページが再び表示されるようになります。

{{% image_container width="250" %}}![](attachments/native-navigation/singlestack.gif){{% /image_container %}}

#### 4.1.2 複数のスタック

アプリに下部のバーアイテムがある場合、下部のバーにあるすべてのアイテムには個別のスタックがあります。 スタック内では、ページを開いたり閉じたりすることでナビゲートできます。

下部のバーアイテムがフォーカスされていない場合は、それを押すとそのアイテムがフォーカスされます。 別の下部のバー項目に切り替えると、フォーカスしたもののページは閉じられません。 アイテムがすでにフォーカスされている場合、もう一度押すとスタックからすべてのページが消去されます。

{{% image_container width="250" %}}![](attachments/native-navigation/multiplestacks.gif){{% /image_container %}}

#### 4.1.3 ポップアップ

ポップアップレイアウトのあるページが開かれると、新しいスタックが作成され、このスタック内のすべてのページが画面を完全に覆います。 前のスタックに戻るには、ポップアップを閉じる必要があります。

ポップアップ内の他のポップアップページを開くことができます。ポップアップ内のポップアップページはすべて一つのスタックとして動作します。 ポップアップから通常のページを開くと、ポップアップが最初に閉じられます。

{{% image_container width="250" %}}![](attachments/native-navigation/popups.gif){{% /image_container %}}

### 4.2 ページを開閉する

多くの場合、ページ履歴を制御する必要があります。たとえば、戻るときにどのページが表示されるかを決定します。 デフォルトでは、「ページを閉じる (Close page)」アクションは現在のスタック内の1つのページのみを閉じますが、より多くのページを閉じるように設定できます。

#### 4.2.1 複数のページを閉じる

format@@0 アクションで適切な数のページを設定することで、履歴内の複数のページを一度にナビゲートできます。 複数のページを閉じると、単一のアニメーションになります。

この動作は、ページ上でモデル化したページを閉じるアクションで構成できます。 またはナノレベルの閉じるページの活動で。 この数値は、静的な数字を設定するか、スナップショット計算でより複雑なケースを設定することができるように、式を使用して設定できます。

#### 4.2.2 閉じるページと開くページを結合する

より複雑なシナリオの場合。 新しいページに移動すると、現在のスタックから1つ以上のページを透過的に削除することができます。 これを行うと、ユーザーが不注意にもはや関連性のないページに戻ることができなくなります。 たとえば、ユーザーが 3 段階のウィザードフローの最後に到達するとします。 format@@0 を設定して、3 ページ目を開き、前の 2 ページ目を同時に閉じることができます。 結果として、ユーザーは単一のトランジションが表示され、戻って移動すると最初の2ページにそれらを導くことはありません。

さらに、ページに移動するときに **履歴をクリア** するようにページを開くアクションを設定できます。 これによりナビゲーションシステム全体が効果的にリセットされ、ユーザーはターゲットページから戻ることができなくなります。

### 4.3 データの更新

データに加えた変更はすぐにすべてのアクティブな画面に反映されることを覚えておくことが重要です。 しかし、これはこれらの変更がデータベースにも反映されていることを意味するものではありません。 これのもう一つの結果は、ユーザーが変更を保存せずに戻る(たとえば戻るボタンを押して)ことを決定したときに、アプリがデータへの変更を追跡する(そしておそらく元に戻す)責任があるということです。

## 5つのベストプラクティスとパターン

### 5.1 ユーザーにとってシンプルにする

ユーザーがアプリ内のどこにいるのか、そして次のオプションが何であるのかを常に理解することが重要です。 全体的には、ユーザーがどこにいるかを確認し、どこに行くことができるように、下のバーを表示することが便利です。 ただし、 いくつかのフローでは、下のバーのないレイアウトやポップアップレイアウトを使用してフォーカスを作成し、気晴らしを削除することが理にかなっています。

### 5.2 パフォーマンスを向上させるために開いているページを最小化する

ユーザーがアプリをナビゲートする間、すべてのページがバックグラウンドで開き続けます。 これにより、デバイスのリソースが使用され、開いているページが多すぎるとパフォーマンスの問題が発生する可能性があります。 これの結果は、Open ページを使用するか、あるいは、Close ページアクションの選択が、Web アプリケーションよりも慎重に行われるべきであるということです。

可能な場合は できるだけ多くの不要なページを開いたままにしないようにするために、ページを閉じるアクション (またはページを表示アクションの上記のバリアント) を使用します。

### 5.3 モーダル相互作用にポップアップを使用する

ほとんどのアプリケーションは一連のプライマリユーザフローで構成されています 各プライマリフローには、例えば、追加のユーザー入力を要求するなど、セカンダリフローがあります。 カレンダーアプリの場合、今後のイベントを参照することが主流であり、1つのイベントを編集することが二次的なフローになる可能性があります。 一般的に、セカンダリフローはプライマリフローを混乱させてはいけません。 つまり、ユーザーがこのセカンダリフローを完了したら、プライマリフローの場所に到達するはずです。

このような動作は、複数のページを閉じる機能を使用してモデル化することができますが、そのようなシナリオにはポップアップページを使用することをお勧めします。 ポップアップページはナビゲーションスタックの外側に完全に存在し、アプリのナビゲーション履歴を中断することなく開いたり閉じたりできます。

### 5.4 スタートアップフロー

Open page action の **Clear history** オプションを使用して、複雑な挙動をモデル化することができます。 最も一般的なユースケースの1つはスタートアップフローです 起動時に一連のチュートリアル画面を表示するアプリを想像してみてください。 これらの画面の後、ユーザーはメインページに上陸する必要があります。 これらから、戻って移動することはできません。 これは、 **履歴をクリア** オプションを使用して、最後のチュートリアル画面からメインページに移動することで実現できます。

## 6個のカスタマイズ

ボックス外では、下部のバーと上部のバーにはデフォルトのスタイルがあります。 このスタイルを変更するには、 [Native Styling Reference Guide](/refguide8/native-styling-refguide#pages) の *Pages* セクションを参照してください。 ただし、デザインに合わせてスタイリングをさらにカスタマイズしたい場合は、 プラグ可能なウィジェットを作成してデフォルトのナビゲーションコンポーネントを置き換えることができます 詳細については、 [Pluggable Widgets API Documentation](/apidocs-mxsdk/apidocs/pluggable-widgets) を参照してください。

## 7 続きを読む

* [ページ参照ガイドを表示](/refguide8/show-page)
* [ページ参照ガイドを閉じる](/refguide8/close-page)
* [ネイティブナビゲーションスタイルリファレンスガイド](/refguide8/native-styling-refguide#navigation-widget)
