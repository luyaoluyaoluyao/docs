---
title: "アクセスルール"
parent: "エンティティ"
menu_order: 70
tags:
  - "ドメインモデル"
  - "エンティティ"
  - "アクセスルール"
  - "xpath 制約"
  - "モジュールの役割"
---

エンティティのアクセスルールは、ユーザーがエンティティのオブジェクトに対して行うことが許可されているものを定義します。 ユーザーは、オブジェクトの作成や削除、メンバーの値の表示や編集を許可することができます。 メンバは、エンティティの属性または関連付けです。 更に、 [XPath 制約](xpath-constraints) を使用して、表示、編集、削除に使用できるオブジェクトのセットを制限することができます。

すべてのアクセスルールは、1つまたは複数の [モジュールロール](module-role)に適用できます。 アクセスルールは、それらのロールへの特定のアクセス権を付与します。 ルールは付加的なものです。つまり、複数のアクセスルールが同じモジュールロールに適用される場合です。 それらのルールのすべてのアクセス権は、そのモジュールの役割のために結合されます。

{{% alert type="warning" %}}

アクセス ルールはエンティティの一般化から継承されません。むしろ、すべてのエンティティに対するセキュリティは明示的に指定されます。 つまり、エンティティにアクセスルールを追加する場合、必要なすべての XPath 制約が適用されることを常に確認してください。 XPath 制約を既に定義している可能性のある一般化のアクセスルールは、その専門分野には適用されず、可視性を制限することはありません。

{{% /alert %}}

## プロパティー

Access rules are defined in the entity **Properties** > the **Access rules** section.

![エンティティのアクセスルール](attachments/access-rules/dm-access-rules-section.png)

{{% alert type="info" %}}

**アクセス ルール** セクションは、プロジェクト セキュリティが **プロダクション** に設定されている場合にのみ表示されます。 詳細については、 [プロジェクトセキュリティ](project-security) を参照してください。

{{% /alert %}}

### ドキュメント

このプロパティでは、アクセス ルールの意図を説明できます。 これにより、特に些細なXPath 条件式の場合には、アクセスルールを理解することができます。

### ルールは次のモジュールのロールに適用されます

このアクセスルールが適用されるモジュールロールには、その前のボックスにチェックマークが付いています。 チェックされたモジュールロールの少なくとも1つを持つすべてのユーザーは、ルールが定義するアクセス権を取得します。

### 新しいオブジェクトの作成を許可

このチェック ボックスがチェックされている場合、ユーザーはこのエンティティの新しいオブジェクトを作成することができます。

### 既存のオブジェクトの削除を許可

このチェックボックスがチェックされている場合、ユーザーはこのエンティティの既存のオブジェクトを削除することができます。

削除することのできるオブジェクトのセットは XPath 制約を使用して制限することができます (下記参照)。

### 会員の読み書きの権利

会員の読み書き権は、エンティティのすべてのメンバー (属性またはアソシエーション) のアクセス権を定義します。 これらのアクセス権は、ユーザーがメンバーの値を表示および/または編集できるかどうかを示します。

| 値         | 説明                                       |
| --------- | ---------------------------------------- |
| -         | ユーザーは、メンバーの値を表示または編集することはできません。          |
| 既読にする     | ユーザーはこのメンバーの値を表示することができますが、編集することはできません。 |
| 読み込み、書き込み | ユーザーは、このメンバーの値を表示および編集することができます。         |

メンバーアクセス権が適用されるオブジェクトのセットは XPath 制約を使用することで制限することができます (以下を参照)。

{{% alert type="info" %}}

顧客は割引を表示することができますが、編集することはできません。 割引属性のアクセス権は「読み取り」です。

![](attachments/domain-model-editor/917534.png)

{{% /alert %}}

### XPath 制約

[XPath 制約](xpath-constraints) は、アクセスルールが適用されるオブジェクトの集合を制約するために使用することができます。 XPath 制約が空の場合、エンティティのすべてのオブジェクトにルールが適用されます。

エンティティ「顧客」はエンティティ「ユーザー」の専門分野です。 エンティティ '注文' はエンティティ '顧客' に関連付けられています。

![](attachments/domain-model-editor/917537.png)

ログインした顧客は個人的な注文を表示することができますが、他の顧客の注文を表示することはできません。 エンティティの 'Order' のアクセスルール内で、以下の XPath 制約を使用することでこれを行うことができます:

```java
[Module.Order_Customer = '[%CurrentUser%]']
```

この XPath 制約により、アクセスルールは現在ユーザー内で署名されている顧客の注文にのみ適用されます。

{{% alert type="info" %}}

「XPath 制約を表示」チェックボックスは、アクセスルールダイアログで XPath 制約を表示できるかどうかのみを示します。 アプリケーションの動作に影響を与えません

{{% /alert %}}{{% alert type="warning" %}}

XPath 制約は、データベース内で計算される永続的なエンティティに対してのみ適用することができます。 持続不可能なエンティティの XPath 制約を定義すると、整合性チェックエラーが発生します。

{{% /alert %}}
