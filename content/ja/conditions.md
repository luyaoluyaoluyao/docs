---
title: "条件"
parent: "page-コンセプト"
---

## 1つの概要

ページでは、特定の要素を表示、非表示、編集可能にできます。 または、属性の値および/またはサインインされたユーザーのロールに基づいて読み取り専用に設定します。 この機能を使用すると、異なる目的で1つのページを再利用できます。 たとえば、そのタブページで情報を表示または編集する権限がないユーザのタブページを非表示にできます。

以下の要素は条件付き可視性をサポートしています。

* すべてのウィジェット
* [グリッドコントロールバーボタン](control-bar)
* [テーブル行](table-row), [タブページ](tab-page), [レイアウトグリッド行](layout-grid)

以下の要素は条件付き編集をサポートしています。

* ウィジェットの入力 ([テキスト ボックス](text-box), [参照セレクター](reference-selector), など)

条件には4種類があります。

* データコンテナの属性の値
  * 属性はブール値または列挙型でなければなりません
  * 各値に対して、要素が表示/編集可能かどうかを指定します。
  * ページを入力して条件属性を変更すると、条件が適用されます。
* [式](expressions) に基づく条件
 * 式はブール型の値に評価しなければなりません
  * 式が `true` と評価されると、要素が表示/編集可能になります
* モジュールの役割
 * 各モジュールで、要素が表示されているかどうかを指定します。
* セキュリティを無視
 * ユーザーがアクションを実行できない場合、ボタンは自動的に非表示になります
 * これを無視してボタンを表示することもできます。 これは匿名ユーザを持つアプリケーションに便利です。 権限がないボタンをクリックすると、サインインページが起動します。

モジュールロールの条件は、テーブル行とタブページの表示にのみ使用できます。 入力ウィジェットを読み取り専用にしたり、ボタンを非表示にしたりするのには使用できません。 ロールに基づいて条件付きで入力ウィジェットを編集可能にするには、ロールに属性の読み取りおよび書き込みアクセスを与えるためにセキュリティを使用します。 たとえば、ロールへの書き込みアクセス権を属性に与えないと、対応する入力ウィジェットは読み取り専用になります(編集不可能)。 ロールに基づいてボタンを非表示にするには、元のページまたはアクションのセキュリティを構成します (例: ロールを作成しないことで、 **新しい** ボタンは非表示になります)。

## 2つのコンテキスト

### 2.1 属性値に基づく要素の表示/有効化

このオプションを選択すると、選択されている属性の値に基づいて可視性または編集性が条件付きになります。

例えば、ユーザーが電子メールを受信したいかどうかを示す Boolean がある場合。 チェックボックスを作成して、この Boolean の値を編集できます。 電子メールアドレスを要求する行は、チェック ボックスがオンになっている場合にのみ表示できます。

#### 2.1.1 属性

これは、条件が基づいている属性です。 属性はブール型または列挙型でなければなりません。

#### 2.1.2 条件

属性の値ごとに、要素が編集可能か表示可能かを指定できます。

### 2.2 式に基づく要素の表示/有効化

このオプションを選択することで visibility または editability は、入力された [マイクロフロー 式](expressions) が `true` または `false` と評価されるかに基づいて条件付きになります。

式の結果はブール型でなければなりません。 式は、 `$currentObject` 変数として利用可能な、囲まれたデータコンテナのbejctを使用できます。

{{% alert type="warning" %}}

式はブラウザで評価されるので、その中で "secret" 値 (アクセスキーなど) を使用しないことをお勧めします。 特に、 [定数](constants) の使用は禁止されています。 また、クライアント側の式は現在、マイクロフローで使用可能なすべての機能をサポートしていません。 お使いのバージョンでサポートされている機能については、オートコンプリートリストを参照してください。

{{% /alert %}}

## 3つのモジュールロール

### 3.1 選択したモジュールロールの要素の表示/有効化

このオプションを選択すると、サインインしているユーザのモジュールロールに基づいて表示/編集が条件付きになります。

例えば、 顧客の現在の注文を含むタブページと注文履歴を含むタブページがある場合。 特定のロールの注文履歴タブを非表示にすることができます。これにより、異なる種類のユーザーのために1つのページを作成する必要があります。

#### 3.1.1 条件

各モジュール ロールに対して、テーブル 行またはタブ ページを表示するかどうかを指定できます。

{{% alert type="warning" %}}

セキュリティのためにタブページとテーブルの行を非表示にしないでください! また、ドメインモデルのセキュリティを使用して、ロールにデータへの適切なアクセスを与えます。

{{% /alert %}}

### 3.2 すべてのモジュールロールのエレメントの表示/有効化 (一部のウィジェット用)

ウィジェットによるアクションのトリガー(例えば、アクションボタン)は、セキュリティによってユーザーがアクションを実行できなくなった場合に自動的に非表示になります。 このルールを上書きしてウィジェットを表示することができます。これは匿名ユーザを持つアプリに便利です。 アクセス権がないボタンをクリックすると、サインインページがトリガーされます。

この表では、通常の場合にアクセス可能なアクションに必要な権限を確認できます。

| アクション/ウィジェットタイプ   | 必要な権利                |
| ----------------- | -------------------- |
| マイクロフローアクションを呼び出す | マイクロフローを実行します。       |
| ページアクションを表示       | ページを開きます。            |
| 作成ボタン             | オブジェクトを作成し、ページを開きます。 |
| 編集ボタン             | ページを開きます。            |
| 削除ボタン             | オブジェクトを削除する          |

