---
title: "ドキュメントのマッピング"
parent: "統合"
menu_order: 35
tags:
  - "studio pro"
---

## 1つの紹介

ドキュメントのマッピングは、MendixオブジェクトをXMLまたはJSONに変換する方法を定義するために使用されます。 特定の XML スキーマまたは JSON 構造に基づいています。 マッピングには 2 種類あります: [マッピングのインポート](import-mappings) と [マッピングのエクスポート](export-mappings).

## 2 マッピングをインポート

インポートマッピングは、特定の XML スキーマまたは JSON 構造に従って、入力 XML または JSON が Mendix オブジェクトに変換される方法を定義するために使用されます。 これは、他のシステムから受信したデータを解釈できるようにするために必要です。 Mendixには、XMLまたはJSONからMendixオブジェクトを作成するための3つの基本シナリオがあります:

*   Webサービス（ [インポートされたWebサービス](consumed-web-service)内で定義されている）から [Webサービス](call-web-service-action) アクティビティを呼び出します。
*   コールアクション [コールRESTサービス](call-rest-action)からXMLまたはJSONを受信する。
*   マッピング [アクションから直接インポートする](import-mapping-action) 内の XML または JSON をインポートします。

これは、 **Order** を Web サービスから **ReceivedOrder** エンティティにマップするインポートマッピングドキュメントの例です。

![](attachments/16713725/16843933.png)

詳細については、 [マッピングのインポート](import-mappings) を参照してください。

## 3つのマッピングのエクスポート

エクスポートマッピングは、特定の XML スキーマに従ってMendix オブジェクトを XML に変換する方法を定義するために使用されます。 これは、他のシステムが処理できるフォーマットで他のシステムにデータを送信できるようにするために必要です。 MendixではMendixオブジェクトをXMLに変換するための2つの基本的なシナリオがあります:

*   [Web サービス](consumed-web-service)を呼び出すアクティビティで ( [インポートされた Web サービス](call-web-service-action) で定義されている) Web サービスに XML を送信します。
*   Exporting XML directly in an [export with mapping](export-mapping-action) action.

これはエクスポートマッピングドキュメントの例です:

![](attachments/16713726/16843940.png)

この例では、エクスポート マッピングが呼び出されると **Cheesecake** エンティティが渡されます。 その後、渡された Cheesecake Mendix オブジェクトから **Topping_Cheesecake** 関連付けに従うことで、 **Topping_Cheesecake** エンティティを取得します。 結果は XML ドキュメントに渡されるか、Web サービスに送信されます。

詳細は、 [マッピングのエクスポート](export-mappings) を参照してください。

## 4 新規マッピングドキュメントの作成

インポートまたはマッピングをエクスポートするには、ユーザーはいくつかのことを行う必要があります:

1.  新しい **インポート マッピング** または **マッピングのエクスポート** ドキュメントを作成します。

2.  **要素の選択...** をクリックして XML スキーマ、インポートされた Web サービスドキュメント、または JSON 構造ドキュメントをこのマッピングのソーススキーマとして選択します。 **図 1** を参照。

    スキーマが大きい場合、要素のサブセットを選択することができますので、すべてをマップする必要はありません。 これについては、 [要素の選択](select--elements) セクションで詳しく説明されています。

3.  Click **OK**. 構造は、左側に図形のプレースホルダを、右側に選択された XSD 要素を使用して作成されます。

    パラメータエンティティをマッピングドキュメントに含めることができます。 パラメータエンティティを持つドキュメントをマッピングするには、設定された型のパラメータを渡すことによって( [call web service](call-web-service-action) または [export with mapping](export-mapping-action) activity)呼び出される必要があります。 パラメータエンティティを持たないドキュメントのマッピングは、パラメータを渡すことなく呼び出すことができます。 インポートマッピングでは、コネクタツールを使用して作成された構造内のプレースホルダにパラメータエンティティをドラッグすることで、パラメータエンティティを含めることができます。 エクスポートマッピングは常にパラメータエンティティ(エクスポートされているオブジェクト)を持つ必要があり、マップされたルート要素が使用されます。 どちらの場合も、パラメータエンティティは黄色の矢印パラメータシンボルとして描かれます。

4.  スキーマの子要素をマップします。 エンティティは以下の4つの方法で取得できます:

    * マッピングパラメーターから
    * 関連付け順
    * カスタムマイクロフローから
    * 選択または継承XML要素の場合、エンティティの専門化により、

5.  最後に、ユーザーはエンティティ属性を XML または JSON 構造に変換する方法を構成する必要があります。

## 5つの便利な関数

*   自動的にマップ:マッピングで使用できるドメインモデル内のエンティティと関連性を自動的に探します。 一致するエンティティまたは関連付けが見つからない場合は、ドメインモデル内に作成されます。 この機能は、 [Map Automatically](map-automatically) セクションで詳しく説明されています。
*   マッピングのクリア: ドキュメント内のすべてのマッピング要素をエンティティと関連付けから切断します。 ドメインモデルでは削除されません。

## 6つのヒント：重要なWindows

マッピングドキュメントは2つのウィンドウに大きく依存します。 Studio Pro で表示されない場合は、 **ビューメニュー** から有効にすることができます。

*   **プロパティ ウィンドウ**。 個々のマッピング要素の詳細はこちらをご覧ください。
*   **コネクタ ウィンドウ**。 コネクタ ウィンドウからの図形はマッピング ドキュメントにドラッグされます。

## 7人のユーザー相互作用

*   エンティティをドラッグします。 コネクタウィンドウからエンティティをドラッグし、エンティティプレースホルダー (破線ボックス) にドロップして、XML 要素に関連付けます。
*   (エンティティ側または XML 側の) マッピング要素をダブルクリックします。 個々のマッピングの詳細を指定できるダイアログを開きます。 要素がエンティティに関連付けられていない場合、最初にエンティティを選択できるダイアログが表示されます。
*   マウスを右クリックし、「図形を選択」します。 XML 要素に結合されたエンティティを変更します。
*   マウスを右クリック、「エンティティに移動」。 エンティティを含むドメインモデルを開き、エンティティにジャンプします。
*   右クリック、"すべてを折りたたむ"。 マッピング要素のすべての子要素を非表示にするため、大きなマッピング内で概要を保持することができます。
*   マウスを右クリック、「すべて展開」。 マッピング要素のすべての子要素を展開します。元の要素はすべて表示されます。
*   左マウスクリック "-" アイコン (マッピング要素の下)。 元の要素を非表示にします。
*   左マウスで、 "+" アイコン (マッピング要素の下) をクリックします。 元の要素を再び表示します。

## 8 プロパティ

| 属性             | 説明                                                                                                |
| -------------- | ------------------------------------------------------------------------------------------------- |
| 名前             | マッピングの名前。                                                                                         |
| ドキュメント         | ここでは、このマッピングが何を行うかを説明するための追加情報を指定することができます。                                                       |
| Webサービス運用プロパティ | このカテゴリは、マッピングが XML スキーマのためではなく、Web サービス呼び出しのための場合にのみ記入されます。                                       |
| Webサービス        | このマッピングが目的のインポートされた Web サービスの名前。                                                                  |
| サービス名          | インポートされたサービスのWSDLで定義されているサービスの実際の名前。                                                              |
| 操作名            | このマッピングが意図されているサービス内の特定の操作の名前。                                                                    |
| 部品を要求する        | エクスポートマッピングにのみ適用できます。 このマッピングが目的のヘッダーまたはbodyパラメーターの名前。 マッピングが全てのボディパラメータのためのものである場合、値は "Body" です。 |
| XML スキーマプロパティ  | このカテゴリは、マッピングが XML スキーマのためで、Web サービス呼び出しのためではない場合にのみ記入されます。                                       |
| XML Schema     | このマッピングが XML スキーマの名前です。                                                                           |
| 開始日            | このマッピングが XML 構造のどの部分を定義するかを決定します。                                                                 |
| 空の値を送信         | エクスポートマッピングにのみ適用できます。 マッピング要素がオプションでnillable の場合、空の値を送信するかどうかを選択する必要があります。 デフォルトは空の値を送信しません。      |
