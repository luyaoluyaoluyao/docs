---
title: "原生导航"
parent: "本地移动版"
menu_order: 11
tags:
  - "移动网络"
  - "navigation"
  - "原生的"
  - "iOS"
  - "Android"
---

## 1 导言

尽管您以类似于网络应用程序的方式模拟本机移动应用， 本地移动应用导航的某些方面不同于网络应用中的方面。 本指南将解释这些导航差异。

### 1.1 网络应用

通常在网页应用中，任何时间都只打开一个页面。 这是因为当您打开一个页面时，上一个页面被替换为一个新页面。 当您返回时，您启动的页面会被重新加载以替换当前页面。 这种页面加载模式会减慢性能。

### 1.2 本地移动应用

在本地移动应用中，页面默认保持开启。 这将使得可以在保持上一个页面的状态，如滚动位置和活动标签信息的同时即时导航(例如点击后退按钮或滑动)。 这对您的应用用户体验非常有利。 然而，我们建议在开发移动应用时考虑到开放网页。 具体而言，请确保一次打开的网页不会太多（这会导致不良表现）。 并且该数据在需要时刷新或更新。 要实现这些目标，Mendix 让您能够对您的精确导航流程进行颗粒控制。

## 2 个布局类型

### 2.1 默认

打开一个有默认布局的页面后，您可以使用标题中的后退按钮回到上一页。 设备的后退按钮 (用于 Android)，或从屏幕左侧滑动(用于 iOS)。 当应用主页打开时，按下Android 后退按钮关闭应用程序。

### 2.2 弹出窗口

带有弹出式布局的页面看起来像一个默认页面， 但它显示一个不同的动画，它有一个密切的图标而不是背面的图标。 在 iOS 上，它也可以通过从弹出窗口顶部下拉来关闭。 在 Android 上，它可以使用设备的后退按钮关闭。 弹出窗口不能有底部栏。 带有弹出式布局的页面不能用作默认主页，也不能添加到底部栏。

在某些情况下请求投入时，弹出弹出可能非常有用。 例如，当您必须扫描二维码时，它们工作良好。 他们还使巫师(表单多步) 更容易， 因为您可以返回之前的步骤并更改事情，直到进程完成并关闭所有弹出窗口。

## 3 与导航相关的布局组件

本机布局有有用的属性，可以启用本机应用中最常用的模式。

### 3.1 标题

启用页眉属性的布局将总是在屏幕顶部显示一条栏。 标题由三部分组成：

* 左侧部分：不可配置，但可以根据布局类型显示背面图标或近似图标
* 中心部分：显示页面标题
* 右侧部分：可与小部件配置，常用来包含按钮

这是iOS上的默认页眉示例：

{{% image_container width="250" %}}![An example of the default header on iOS.](attachments/native-navigation/header.png){{% /image_container %}}

### 3.2 底栏

您可以在本机导航配置文件中添加底部条目。 这些项目将显示在启用底部栏属性的任何页面上。

底部栏中的每个项目都有自己的导航堆栈。 这意味着如果您在第一个标签中打开了几个页面， 然后切换到第二个标签，然后再回到第一个标签。 你的第一个标签页将在你离开时仍然是打开的。

{{% alert type="warning" %}}
没有底部栏的页面将在一个单独的堆栈中创建。 If you navigate from a page *without* a bottom bar to a page *with* a bottom bar, then all pages in that stack are closed.
{{% /报警 %}}

{{% image_container width="250" %}}![An example of the default bottom bar on iOS.](attachments/native-navigation/bottombar.png){{% /image_container %}}

## 4 Mendix 本地导航是如何工作的？

默认情况下，页面将保持开放，以提供更好的用户体验。 但它们也必须得到正确的管理，您的应用才能有优秀的性能和逻辑流通过应用程序。

### 4.1 应用

要保持页面打开，导航系统使用多个页面堆叠。 移动应用程序可以同时包含多个堆栈。 堆栈可以与一堆卡片相比：您可以添加卡片到顶部，您可以从顶部移除卡片。

#### 4.1.1 单堆放物

如果您的应用没有使用底部栏，那么就有一个堆栈。 这种情况最类似于网上的导航。 然而，仍然存在着这种情况。 重要的是要记住，堆栈中的所有页面都保持打开，直到您明确关闭它们或按后退按钮。

堆栈上的第一页始终是首页。 当您点击打开页面的按钮时，堆栈上有两页，等等。

当您关闭一个页面(通过返回按钮，关闭动作，或滑动返回(iOS)) 只有当前页面被关闭，上一个页面再次可见。

{{% image_container width="250" %}}![](attachments/native-navigation/singlestack.gif){{% /image_container %}}

#### 4.1.2 多个应用

如果应用程序有底部条目，底部条中的每个项目都有一个单独的堆栈。 在一个堆栈内您可以通过打开和关闭页面导航。

如果底部条目未被聚焦，按下它会聚焦该项目。 切换到另一条底部条将不会关闭焦点条目的页面。 如果项目已经被聚焦，再次按下它会将所有页面从堆栈中删除。

{{% image_container width="250" %}}![](attachments/native-navigation/multiplestacks.gif){{% /image_container %}}

#### 4.1.3 弹出器

当打开带有弹出布局的页面时，将创建一个新的堆栈，此堆栈中的所有页面都完全覆盖屏幕。 要回到上一个堆栈，弹出窗口必须关闭。

在弹出窗口中打开其他弹出页面是可能的，所有这些人的行为都是单一的。 当从弹出窗口打开正常页面时，弹出窗口将先关闭。

{{% image_container width="250" %}}![](attachments/native-navigation/popups.gif){{% /image_container %}}

### 4.2 开幕和闭幕页面

您常常需要控制页面历史才能确定哪个页面在您返回时显示。 默认情况下，关闭页面操作只能关闭当前堆栈中的一个页面，但它可以配置为关闭更多页面。

#### 4.2.1 关闭多页

您可以在关闭页面操作中设置相应的页面数量，一次性导航多个页面。 关闭多个页面的关闭操作导致一个动画。

您可以在关闭页面操作上配置这种行为，您在页面上已经模拟了这些动作， 或在您的nanoflows中的关闭页面活动。 这个数字可以用表达式设置，以便您可以为更复杂的情况设置一个静态数字或一个快照计算的数字。

#### 4.2.2 关闭和开启页面

对于更复杂的情景， 当导航到一个新的页面时，可以透明地从当前堆栈中删除一个或多个页面。 这样做可以确保用户不能无意中回到不再相关的页面。 例如，当用户到达三步向导流结束时， 您可以配置打开页面活动来打开第三页，同时关闭前两个页面。 因此，用户将看到单一的过渡，回去将不会导致他们走到头两页。

此外，您可以在导航到页面时配置打开页面操作来 **清除历史**。 这将有效地重置整个导航系统，用户将无法从目标页面返回导航。

### 4.3 更新数据

必须记住，您对数据的任何更改都将立即反映在所有活动屏幕上。 然而，这并不意味着这些变化也是对数据库的承诺；这仍然是一项明确的行动。 由此产生的另一个后果是，当用户决定返回时(例如通过按下返回按钮)，您的应用负责跟踪(并可能恢复)数据的更改，而不会保存他们的更改。

## 5 最佳做法和模式

### 5.1 让用户简单易用

用户必须始终了解他们在应用中的位置以及他们的下一个选项是什么。 总的来说，显示底部栏是有益的，以便用户能够看到他们的去处和去哪里。 然而，仍然存在着这种情况。 在某些流中，通过使用没有底部栏的布局或使用弹出式布局来创建焦点和移除分散位置是有意义的。

### 5.2 最小化打开页面以提高业绩

用户导航应用程序时，所有页面都在后台打开. 这使用了设备的资源，打开页面太多可能会导致性能问题。 这样做的结果是，在选择使用打开页面或关闭页面时，应该比使用网页应用程序更加慎重。

如有可能： 尽可能频繁地使用关闭页面动作(或上面提到的“显示页面动作”的变体)，确保您不会打开太多不必要的页面。

### 5.3 使用弹出式交互功能

大多数应用程序由一组主用户流组成。 和每个主流可能有次要流，例如要求一些额外的用户输入。 如果是日历应用程序，浏览即将发生的事件将是主要的流程，编辑一个事件可能是次要流程。 一般而言，二级流动不应扰乱初级流动， 这意味着，在用户完成这次二次流动之后，他们应该最终走向他们的主要流动地点。

虽然这种行为可以使用关闭多页的能力来建模，但我们建议在这种情况下使用弹出页面。 弹出页面完全在导航堆栈之外存在，可以在不扰乱您的应用导航历史的情况下打开和关闭。

### 5.4 启动流动

打开页面动作的 **清除历史** 选项可以用于模拟复杂的行为， 但它最常用的实例之一是启动流程。 想象一个在启动时显示一系列教程屏幕的应用。 在这些屏幕后，用户应该登陆主页。 从这些因素中我们不应有可能回避。 可以通过使用 **清除历史** 选项来实现这一点，从最后教程屏幕到主页。

## 6 自定义

在方框之外，底部栏和顶部栏有默认样式。 To change this styling, see the [Pages](/refguide8/native-styling-refguide#pages) section of the *Native Styling Reference Guide*. 但是，如果你想要进一步定制样式以匹配你的设计。 您可以创建插件插件来替换一些默认的导航组件。 欲了解更多信息，请参阅 [插件API 文档](/apidocs-mxsdk/apidocs/pluggable-widgets)

## 7 阅读更多

* [显示页面参考指南](/refguide8/show-page)
* [关闭页面参考指南](/refguide8/close-page)
* [本机导航样式参考指南](/refguide8/native-styling-refguide#navigation-widget)
