---
title: "已发布的网络服务"
parent: "集成"
tags:
  - "studio pro"
---

{{% alert type="info" %}}
<img src="attachments/chinese-translation/china.png" style="display: inline-block; margin: 0" /> 对于简体中文翻译，请点击 [中文为 xix x](https://cdn.mendix.tencent-cloud.com/documentation/refguide8/published-web-services.pdf)。
{{% /报警 %}}

{{% alert type="warning" %}}
本文件介绍已发布的网络服务。 如果您在已发布的网页服务屏幕上寻找具体信息，您可以检查 [已发布的网页服务](published-web-service) 文档。
{{% /报警 %}}

## 1 导言

您可以在 Mendix 应用程序中发布您自己的网络服务。 这些网络服务包括业务。 其它应用程序可以调用此网络服务的操作，您可以返回结果。 这个结果基于一个微流程，它将在调用网络服务时执行。

若要启用微流作为网络服务，请右键点击微流空白处的任意位置，然后选择“发布为网络服务操作...”。

## 2 运行时文档

运行时，Mendix 项目发布网络服务文档。 地址是(如果本地运行) `http://localhost:8080/ws-doc`。 这份文件以两种方式解释了如何使用这项服务：

### 2.1 WSDL

这是一个可以读取的XML文档。 这意味着Studio Pro 可以阅读这份文件，并自动确定如何与webservice 交互。

### 2.2 请求/响应 XML 消息

在 "已发布的网页(`http://localhost:8080/ws-doc/`)上，您也会找到每个已发布的网页服务的所有操作列表。 这些链接到描述示例消息的页面。 注意在构建Mendix到Mendix 交互时，您不需要这些示例。 他们在那里纯粹是为了帮助想要创建自己客户的人。

## 3 发布的网络服务通话如何工作？

已经公布的微流可以被外部系统调用。 在本节中，我们将探讨这一进程如何运作。

### 3.1 呼叫已开始

网络服务通话仅仅是运行时间接收并识别为网络服务通话的HTTP通话。 收到了一个 XML 消息，并将其解析为运行时间能够理解的格式。

#### 3.1.1 身份验证

每次网络服务通话都需要身份验证。 具体地说，SOAP信封头应包含一个叫做“认证”的元素，包含一个用户名和密码：

```xml
<soap:Header>
        <tns:authentication>
            <username>john</username>
            <password>john'ssecret密码</password>
        </tns:authentication>
    </soap:Header>

```

These details _must_ match an existing webservice user in the runtime. 这些用户可以通过登录管理员并点击系统模块中用户数据网格中的“创建网络服务用户”来创建。 普通(非网络服务)用户不能用来呼叫网络服务，网络服务用户不能通过标准登录页面登录。

除此之外，正常用户和网络服务用户如何称得微流之间没有区别。

#### 3.1.2 参数处理

根据哪些类型的参数是对已发布的 Microflow的输入，可以发生两件事情。

如果输入是域实体, 则XML 会被翻译成使用XML到域映射的实体。 请注意，这些映射创建实际域对象，取决于映射。

普通参数 (整数、字符串等) 没有以任何方式转换并直接用作输入。

### 3.2 执行微流

一旦参数被解析为XML，微流调用将正常进行。

### 3.3 结果被转换回XML

如果微流具有返回值，它将会在网络服务通话后被恢复。 与参数一样，基本类型将直接返回，域实体需要映射才能转换为XML。 数字格式化在消费和已发布的网络服务之间是一致的。 前线零从数字中删除，没有使用科学标记。

### 3.4 反应状态

响应中默认的 HTTP 状态代码是 200 (OK)。 当客户端发送错误格式的请求时，或当发生内部服务器错误时，运行时间与 SOAP 错误。 HTTP 头将在这些情况下包含状态 500。

请注意，状态代码是在实际响应之前发送的。 如果在响应发送错误时发生, 则不能更改响应状态。 这意味着接收方可能会收到一种身份码200, 即使在答复序列化过程中服务后来失败了。 其原因是，为了优化内存使用，我们不会在内存中创建整个响应。 相反，在序列化过程中，应答将立即发送给客户端以释放内存。 这意味着您需要确保您拥有创建有效响应所需的数据，然后才能完成网络服务。
