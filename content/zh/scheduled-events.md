---
title: "预定事件"
category: "桌面模型"
#menu_order:
description: "配置预定事件的选项"
tags:
  - "预定事件"
  - "执行属性"
  - "D. 时间安排"
  - "间隔"
  - "计划问题"
  - "时区"
  - "日光保存"
---


在预定的事件中，您可以让运行时间在特定时间执行微流。 这次活动也可以在一定时间内重复，例如每天一次。

一个预定的事件被添加到您的模块作为文档(右键单击您的模块，您会发现它在 *添加其他文件下列出。 。*。

{{% alert type="warning" %}}
计划中的事件可以在本地测试，但如果您的应用被部署为免费应用，它们将不会运行。 请参阅 [Mendix Cloud 的免费应用部分](/developerportal/deploy/mendix-cloud-deploy#free-app) 获取关于免费应用限制的更多信息。
{{% /报警 %}}

## 公共属性

| 财产 | 描述                                                                |
| -- | ----------------------------------------------------------------- |
| 名称 | 预定活动的名称。 此名称存储在运行时的ScheduledEventInformation 对象中，因此计划活动的运行是可以识别的。 |
| 文件 | 此字段仅用于文档。 其值对最终用户不可见，也不影响您的应用程序的行为。                               |

## 执行属性

| 财产  | 描述                                                                                          |
| --- | ------------------------------------------------------------------------------------------- |
| 微流  | 执行预定事件时执行的微流。 它应该没有参数并与所有权限一起运行(见 [Microflow](microflow))。                                  |
| 已启用 | 只有在预定事件启用时才执行微流。 此设置仅在从Modeler或Eclipse运行时适用。 在生产环境中，通过适当的工具(开发者门户、Windows服务控制台等)启用/禁用预定的事件。 |

## 时间属性

| 财产      | 描述                                                                                                            |
| ------- | ------------------------------------------------------------------------------------------------------------- |
| 开始日期/时间 | 首次执行预定事件的日期和时间。 如果开始日期/时间是 UTC 时间，当它是 UTC 指定时间时执行预定事件(通用协调时间)。 如果起始日期/时间是服务器时间 预定的事件是在您的应用程序运行的服务器上指定的时间时执行的。 |
| 重复      | 如果重复发生，在指定的间隔时间内（例如每5分钟）重复预定的事件。                                                                              |
| 间隔      | 这个数字和间隔类型表示两个事件之间的间隔有多大。 此数字应该大于零。                                                                            |
| 间隔类型    | 区间类型决定区间的单位。 加上间隔，它表明两个事件之间的间隔有多大。 例如，1天或10分钟。                                                                |

### 补充资料

平台按固定时间安排预定的事件。 这意味着平台在启动时安排下次迭代/间隔的预定事件。 这是通过检索间隔完成的，此外，平台也做了一些计算。 如果您的应用正在缓慢启动， 一个原因可能是一个或多个预定的事件在过去的很长时间里有一个 **开始日期/时间**。 在这种情况下，它可以帮助为这些预定的事件设置一个更近期的 **开始日期/时间**。

秒、分钟、小时、日和周的安排与配置完全相同。 然而，月份和年份可能无法按你的期望执行。 一个月被解释为31天间隔，一年为365天。

如果您安排一个事件在3月1日开始， 它将于4月1日、5月2日、2日、3月3日、3日、3日、3日等地运作。 所以在安排你的活动时会很清楚，因为他们可能会运行一天你所期望的。

这是Mendix 5.3.2 发行量如何计算间隔的简化例子。 后来的释放可能略有不同。

```java
switch(scheduledEvent.getIntervalType())
□
    case SECOND:
        timeUnit = TimeUnity. 经济周期；
        = 预定事件。 etInterval();
        间歇;
    案例联合国科特迪瓦特派团：
        时间单位 = 时间单位 INUTES;
        间隔 = 计划事件。 etInterval();
        间歇;
    案例HOUR：
        时间单位 = 时间单位 OURS;
        间隔 = 计划事件。 etInterval();
        间歇;
    cases DAY：
        timeUnit = TimeUnit。 AYS;
        间隔 = 计划事件。 etInterval();
        休息时间;
    case WEEK：
        timeUnit = TimeUnit。 AYS;
        间隔 = 计划事件。 etInterval()*7；
        休息；
    案例监控：
        时间单位 = 时间单位。 AYS;
        间隔 = 计划事件。 etInterval()*31；
        休息；
    YEAR案件：
        timeUnit = TimeUnit。 AYS;
        间隔 = scheduledEvent.getInterval()*365;
        休息;
}
```

{{% alert type="warning" %}}

如果在一个月的某一天运行一个预定的活动是绝对关键的，你应该安排该事件每天运行。

{{% /报警 %}}

在您的微流程中，您应该以独家分割开头，并执行如下表达式：

```java
parseInteger( formatDateTime( [%CurrentDateTime%], 'dd') ) = 1
```

或

```java
parseInteger( 格式化日期( [%CurrentDateTime%], 'dd) ) = 15
// 这将在本月第1和第15个月运行预定的事件
```

或者按照 [Herbert Vujik](https://mxforum.mendix.com/questions/6934/How-are-monthly-Scheduled-Events-planned#10518) 的建议，使用这个表达式在月的最后一天运行它：

```java
formatDateTime([%CurrentDateTime%], 'dd') = formatDateTime([%EndOfCurrentMonth%], 'dd') 
```

除了每月排定的活动外，您还想在安排每日活动时小心些。 如果您计划在某个特定时间每天运行一个事件，您也需要知道节日时间。

每当您设置一个事件每天在某个时间运行时，它将在指定时间开始。 然而，在这之后它将在一个固定的时间间隔内运行(内部计算为每个X纳米秒)。 这意味着每隔24小时运行一个每天的事件。 Therefore, if the time changes because of daylight saving, your event **could** be an hour off.

但这只适用于您服务器所在的区域(时区)。 无论你从你的角度选择什么选项，如果你是在一个适应日光储蓄的国家。 您将会注意到预定的事件运行一个小时的计划时间。 当计划事件在特定的 UTC 时间启动时，平台在技术上不会有问题，因为UTC 不知道日光节省。 然而，您的用户仍将在不同的小时内体验要运行的事件。

不幸的是，在这个问题上没有大的工作可做。 您可以创建一个类似的解决方案，如上文所述。 这可以使用相同类型的表达式，除非使用日期格式表达式'dd'， 您应该使用“HH”(0-23小时)，或“kkk”(1-24小时)。
