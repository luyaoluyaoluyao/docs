---
title: "事件处理"
parent: "实体"
menu_order: 50
tags:
  - "域模型"
  - "实体"
  - "事件处理程序"
---

事件处理程序定义了处理与实体相关事件的微流。 根据选择的时间和类型，微流在创建、提交、删除或回滚对象之前或之后执行。

{{% alert type="warning" %}}

适度使用事件处理程序。 事件处理程序将在每次相应事件出现时触发，因此它必须是您想要永远发生的事情。 如果你只想在某种形式上发生某种事情，你可以在那里使用本地微流，例如在一个自制的保存按钮上。

{{% /警示%}}!{% alert type="warning" %}}

事件处理程序不会在特定的顺序中触发。 因此，确保事件不以任何方式相互关联(一般事件和专业事件也是如此)。

{{% /报警 %}}

## 属性

### 瞬时

此属性定义微流是在指定事件发生之前还是之后执行。

| 值  | 描述             |
| -- | -------------- |
| 前  | 在指定事件发生之前执行微流。 |
| 之后 | 微流在指定事件发生后执行。  |

### 事件

此属性定义了触发微流执行的事件。

| 值        | 描述                                                                                                            |
| -------- | ------------------------------------------------------------------------------------------------------------- |
| 创建       | 当创建此实体的对象时，将执行微流。 当用户在网格上点击 **创建** 按钮或在微流程中创建对象时就会发生这种情况。 在微流程创建动作中，在对象以默认值初始化后执行 Create 但在操作中指定的任何更改项目被应用之前。 |
| 提交       | 当该实体的对象被承诺时，将执行微流。 当用户点击表单上的保存按钮或在微流程中提交对象时发生这种情况。                                                            |
| 删除       | 当此实体的对象被删除时，将执行微流。 当用户点击网格中的删除按钮，或在微流程中删除对象时，就会发生这种情况。                                                        |
| Rollback | 当此实体的对象回滚时执行微流。 当用户在表单中点击取消按钮或在微流程中滚回对象时，就会发生这种情况。                                                            |

### 微流

此属性定义了为指定事件执行的微流。 微流程需要有某个参数和返回类型，取决于事件处理器的时间和事件：

*   除“创建前”外，所有事件处理器的微流都会得到事件发生的对象作为参数。
*   在</em> 事件之前执行了 _的微流应该返回一个布尔值，指定事件是否应该继续 (True) 还是取消 (False)。 当多个微流处理同一事件时，当一个微流返回False时，它会立即被取消。 在这种情况下，可能根本不会进行一些微流。 使用此功能可以在某个条件未满足时取消对对象的承诺。</li> </ul>

| 瞬时 | 事件       | 获取对象作为参数 | 返回布尔值 |
| -- | -------- | -------- | ----- |
| 前  | 创建       | 否        | 否     |
| 之后 | 创建       | 否        | 否     |
| 前  | 提交       | 否        | 否     |
| 之后 | 提交       | 否        | 否     |
| 前  | 删除       | 否        | 否     |
| 之后 | 删除       | 否        | 否     |
| 前  | Rollback | 否        | 否     |
| 之后 | Rollback | 否        | 否     |

### 微流程返回 false 时出现错误 (仅当时刻是 'Before' 时)

启用此选项后，当microflow 返回false时，事件处理程序会引起错误。 然后您可以使用错误处理来检测事件处理程序是否返回了false。 这使得“提交前”事件处理程序更像本机验证。 如果禁用此选项。 a “提交前”事件处理程序只能停止提交，但其余微流仍将执行。

_默认值：_ 是
