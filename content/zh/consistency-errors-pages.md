---
title: "页面编辑器一致性错误"
parent: "一致性错误"
description: "描述Mendix 桌面模型中的一致性错误以及修复这些错误的方法。"
tags:
  - "桌面模组"
  - "一致性错误"
  - "检查"
  - "错误"
  - "页面"
---

## 1 导言

在本文件中，我们将解释如何解决在配置桌面模式中页面时可能出现的最常见的一致性错误。 一致性错误的一个例子是当您没有在页面上指定数据视图的实体属性。

## 2 列表视图一致性错误

如果您没有配置 [数据源](data-sources) for a [列表视图](list-view) ，您将会遇到一致性错误。

下面的方案显示，列表视图的数据源已设置为 **数据库**， 但需要从数据库检索的特定实体尚未设置。 这造成一致性错误。

![数据源一致性错误方案](attachments/consistency-errors-pages/dm-list-view-error.png)

下表描述了您在配置列表视图时可能遇到的最常见错误。 造成这些错误的原因，以及解决这些错误的方法。

| 检查面板中的文本                                     | 错误的原因                                       | 修复路径                                                        |
| -------------------------------------------- | ------------------------------------------- | ----------------------------------------------------------- |
| 未为此列表视图的数据源配置任何实体。 选择一个实体或更改数据源。             | **数据库/XPath/关联** 选项被选为列表视图的数据源，但没有指定实体。     | 若要修复错误，请执行以下操作之一： <ul><li>右键单击列表视图，在下拉菜单中单击**选择实体** 并设置实体</li><li>打开列表视图属性 > **数据源** 并在 **Entity (路径)** 字段中选择一个实体</li></ul>您也可以更改列表视图的数据源类型。 |
| 没有为此列表视图的数据源配置微流。 选择微流程或更改数据源。               | 数据源设置为 **微流**, 但没有选择特定的微流。                  | 打开列表视图属性 > **数据源** 并在 **微流程** 字段中选择微流程。 或更改数据源的类型。          |
| 没有为此列表视图的数据源配置nanoflow 选择一个 nanoflow 或更改数据源。 | 数据源设置为 **Nanoflow**, 但没有选择特定的nanoflow       | 打开列表视图属性 > **数据源** 并在 **Nanoflow** 字段中选择一个微流 或更改数据源的类型。     |
| 属性 {AttributeName} 不是实体 {EntityName} 的属性。    | 您更改了列表视图的目标实体，但没有更新其内容。 列表视图的内容填充了另一个实体的属性。 | 打开小部件属性 > **数据源** 并为 **属性(路径)** 选择另一个属性。                    |

## 3 数据视图一致性错误

未为一个 [数据视图](data-view) 配置一个 [数据源](data-sources) 以适当方式导致一致性错误。 例如，您已选择 **监听小部件** 作为数据源。 但您尚未选择特定的 **列表小部件** 您指向的是。

![没有配置列表小部件的数据视图](attachments/consistency-errors-pages/dm-data-view-no-list-widget.png)

下表描述了您在配置数据视图时可能遇到的最常见错误。 造成这些错误的原因，以及解决这些错误的方法。

| 检查面板中的文本                            | 错误的原因                                        | 修复路径                                                 |
| ----------------------------------- | -------------------------------------------- | ---------------------------------------------------- |
| 没有为此数据视图的数据源配置任何实体。 选择一个实体或更改数据源。   | **Context** 被选为数据视图的数据来源，但没有指定实体。            | 打开数据视图属性 > **数据源** 部分并在 **实体** 字段中选择一个实体 或更改数据源的类型。  |
| 没有为此数据视图的数据源配置微流。 选择微流程或更改数据源       | 微流被选为数据来源，但没有选择特定的微流。                        | 打开数据视图属性 > **数据源** 部分并在 **微流程** 字段中选择微流程。 或更改数据源的类型。 |
| 没有为此数据视图的数据源配置列表小部件。 选择一个小部件或更改数据源。 | **监听小部件** 已配置为数据视图的数据源。 但特定列表视图小部件在同一页面上不存在。 | 在同一页上创建列表视图，配置它，并选择它作为数据视图的列表小部件； 或更改数据源的类型。         |
| 所有从页面参数接收对象的数据视图必须具有相同的实体。          | 您在一个页面上有多个数据视图，有不同的实体作为数据源。                  | 为所有数据视图选择一个和相同的实体，或更改它们的数据源。                         |

## 4 上下文不可用的一致性错误

下面的表格描述了当一个页面预计上下文不可用时可能出现的错误。

| 检查面板中的文本                                                     | 错误的原因                                                                                                          | 修复路径                                                                            |
| ------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------- |
| 选中的页面 {Name of the page} 需要一个 {type of object}类型的对象，这在这里不可用。 | 页面有一个数据视图，期望某一特定类型的对象传递给它。 这个错误发生在从另一个页面调用页面时，因为该页面没有这个对象。 欲了解更详细的示例，请参阅第 [4.1 部分错误修复示例1](#error-example-1)。   | 确保将对象传递到具有配置数据视图的页面。 欲了解更多信息，请参阅  [4.1 错误修复示例1](#error-example-1) 部分。           |
| 选定的页面 {Name of page} 需要一个 X 类型的对象，这与在此处可用的 Y 类型对象不兼容。        | 您有一个打开页面的小部件 (例如按钮)。 页面的数据视图需要传递给特定类型的对象。 然而，小部件被放置在带有另一种类型对象的数据容器中。 详细示例见 [4.2 错误修复示例2](#error-example-2) 部分。 | 确保按钮放置在正确的数据容器中，并将对象的正确类型传递到页面。 欲了解更多信息，请参阅 [4.2 错误修复示例2](#error-example-2) 部分。 |

### 4.1 错误修复示例1 {#error-example-1}

当一个页面期望某个上下文不会从一个调用页面或微流程传递给它时，您将会遇到一致性错误。

让我们研究一个示例： **客户** 页面包含一个列表视图，列出所有客户的姓名(**客户** 被设置为 **实体** 在 **数据源** 属性中， 和 **详细信息** 列表视图以外的按钮 (仅放入 [容器](container))。 **详细信息** 按钮在用户点击时打开 **客户详细信息** 页面 ( **点击动作** 按钮设置为 **页面**).

![客户页面上的按钮属性](attachments/consistency-errors-pages/dm-customers-page.png)

然而， **客户明细** 页面有一个数据视图，期望一个对象 *客户* 传递给它。 换言之，此页面需要先获取数据才能显示。

![数据视图期望客户对象](attachments/consistency-errors-pages/dm-data-view-customer.png)

由于这个对象不是从 **客户** 页面传递给它，您会遇到一个一致性错误。

![上下文不可用时发生错误的例子](attachments/consistency-errors-pages/dm-object-error.png)

因为 **详细信息** 按钮到 **客户** 页面在数据容器之外， 它不知道要通过哪个客户 (对象)。 修复这个错误的方法取决于以下方面：

* 您想要将客户列表中指定的 *客户* 对象传递到 **客户详细信息** 页面， 换言之， 特定客户的详细信息将显示在 **客户详细信息** 页 (详细信息) 见章节 [4。 .1 将特定对象传递到页面](#passing-specific-object)
* 您想要为 *客户* 类型一个新对象，并将其传递到 **客户明细** 页面， 这意味着将创建一个新客户(更多信息，见第 [节)。 2 创建一个新对象并传递到页面](#creating-new-object))

#### 4.1.1 将特定对象移至页 {#passing-specific-object}

如果你想要 **客户详细信息** 页面来打开特定客户的详细信息， 这意味着您想要将特定对象传递到页面。 由于我们已经有客户列表在 **客户** 页面上的列表视图，我们可以通过以下方式解决这个错误：

1. 打开 **客户** 页面。

2.  在列表视图中拖动 **详细信息** 按钮。

    ![详细信息按钮示例](attachments/consistency-errors-pages/dm-details-button-inside-the-list-view.png)

现在按钮会从邮件列表视图中获取类型 *客户* 的对象 **客户** 页面， 并且它将传递到 **客户详细信息** 页面。 因此，某个客户的详细信息会显示在 **客户详细信息** 页面上。

#### 4.1.2 创建一个新对象并将其传到页面 {#creating-new-object}

如果您想要在 **客户详细信息** 页面上创建一个新客户并填写客户的详细信息， 您可以做以下工作：

1. 打开 **客户** 页面。

2. 为 **详细信息** 按钮打开属性，并将 **创建对象** 设置为 **点击操作**。

3. 设置 **客户** 为 **实体**。

4.  设置 **客户详细信息** 为 **页面**。

    ![点击事件示例](attachments/consistency-errors-pages/dm-button-create-object.png)

5. 将按钮的标题从 **细节** 更改为 **添加**因为此按钮现在将创建一个新客户，而不是显示现有客户的详细信息。

现在当用户点击此按钮时， **客户详细信息** 页面将打开，新的 *客户* 对象将被创建。

### 4.2 错误修复例2 {#error-example-2}

如果一个小部件打开页面，此小部件在实体X的数据容器内， 但所引用的页面需要实体Y, 您将会遇到一致性错误。

让我们学习一个示例：您在 **Engineers** 页面上有一个 **详细信息** 按钮，打开 **任务** 页面。

![工程师页面上的按钮](attachments/consistency-errors-pages/dm-engineers-page.png)

按钮放置在列表视图中； 列表视图的数据源设置为实体 *Engineer* in **Properties** > **Data Source**。

任务页面上有一个数据视图。 但数据视图的数据源已设置为实体 *智能任务* **属性** > **数据源**。

这意味着数据视图期望传递给它类型为 *SmartTask* 的对象。 但是 **Engineers** 页面正在通过类型 *Engineer* 的对象。

![数据源示例](attachments/consistency-errors-pages/dm-tasks-page-list-view.png)

为了解决这个错误，您可以做以下事情之一：

* 将 **详细信息** 按钮放置在数据容器中，该容器会将正确的数据类型传递到页面 (例如) 您可以将按钮放置在列表视图中，并将其数据源设置为实体 *SmartTask*)
* 选择另一个页面，不会指望任何对象传递给它，或指望类型为 *Engineer* 的对象
* 将 **任务** 页面上的数据来源更改为实体 *Engineer*

## 5 输入部件一致性错误

最常见的输入小部件错误、原因和修复方法见下表。 关于输入小部件的更多信息，请参阅 [输入小部件](input-widgets)。

| 检查面板中的文本                               | 错误的原因                                                                                                | 修复路径                                                                                                                                     |
| -------------------------------------- | ---------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| 这个小部件只能在数据容器内运行。 将其移动到数据视图，列表视图或模板网格中。 | 您已将输入部件添加到页面，但它不在数据容器内。 输入部件需要指向特定实体类型的属性。 实体只能通过数据容器获得。 欲了解更多关于输入小部件的信息，请参阅 [输入小部件](input-widgets)。 | 将此部件放入数据容器：数据视图，列表视图或模板网格。                                                                                                               |
| 选择此 {widget name} 的属性。                 | 您已经添加了一个输入小部件，它在数据容器内，但没有为它选择一个属性。                                                                   | 右键单击小部件，在下拉菜单中点击 **选择属性** 并设置属性； 或打开部件属性 > **数据源** 部分并在 **属性(路径)** 字段中设置属性。                                                              |
| 关联 {Name} 必须是一个引用(不是一个参考集)             | 您已经添加了一个参考选择器，但您选择的关联不是参考类型(不是一对多)。                                                                  | 打开您的域名，找到您选择的参考选择器的关联，并将其更改为一对一的关联。 关于如何修复参考选择器的错误的更多信息，请参阅 [5.1节，参考选择器的多重性](#incorrect-multiplicity-reference)                          |
| 关联 {Name} 必须是一个参考集(不是引用)               | 您已经添加了一个参考集选择器或一个输入参考集选择器。 但您选择的关联不是参考类型(不是多对多的)。                                                    | 打开您的域名，找到您选择的参考设置选择器的关联，并将其更改为多的关联。 关于如何修复参考集选择器和输入参考集选择器的一致性错误的更多信息，见第 [5节。 引用集选择器和输入参考集选择器的多重性](#incorrect-multiplicity-reference-set) |
| 实体 {Name} 没有关联 {Name}                  | 您添加了一个参考集选择器或输入参考集选择器，但您已更改了关联所有者。                                                                   | 打开您的域名，选择一个实体，在其属性中更改关联的所有者。 关于如何修复参考集选择器和输入参考集选择器的一致性错误的更多信息，见第 [5节。 引用集选择器和输入参考集选择器的所有权不正确](#incorrect-ownership)                      |

### 5.1 参考选择器的多重性 {#incorrect-multiplicity-reference}

参考选择器是用于显示和编辑一对多关联的部件。 关于小部件的更多信息，请参阅 [参考选择器](reference-selector)。

例如，你有几名雇员与他们工作所在的一个城市有联系。 这是一个一对多的关联：多个 *员工* 对象与一个 *城市* 对象相关联。  以这种方式引用单个对象的关联是 *引用*， 相对于 *引用集*, 其中多个对象可以引用多个其他对象。 在一个参考中，协会的“单一对象”方面始终是协会的业主。 关于关联及其类型的更多信息，见 [Associations](associations)。

![一对多协会](attachments/consistency-errors-pages/dm-many-to-one-association.png)

如果您有错误的关联类型， 您将会遇到一个一致性错误： *关联 {Name} 必须是一个引用(而不是一个参考集)*

要修复此错误，请执行以下操作：

1. 打开您的域模型并双击您为参考选择器使用的关联。

2.  在 **关联** 对话框窗口属性中，将 **多重性** 更改为一对多(在我们的例子中) 多个“员工”对象与一个城市对象相关联。

    ![一对多的协会的多重性](attachments/consistency-errors-pages/dm-one-to-many-multiplicity.png)

3. 点击 **确定** 保存更改。

您更改了关联的多重性并修复了错误。

### 5.2 参考集选择器和输入参考集选择器的多重性不正确 {#incorrect-multiplicity-reference-set}

参考集选择器和输入集选择器是用于显示和编辑多对多个关联的部件。 关于这些部件的更多信息，请参阅 [Reference Set Selector](reference-set-selector) and [Input Reference Set Selector](input-reference-set-selector)。

例如，您有几名雇员可以在本周访问不同城市的客户。 因此，许多雇员与许多城市有关联。 这是一个 *员工* 实体和 *城市* 实体之间的多对多的关联(多名员工与多个城市相关联)。 以这种方式引用多个对象的关联是 *参考设置*。 关于关联及其类型的更多信息，见 [Associations](associations)。

![多对多协会](attachments/consistency-errors-pages/dm-many-to-many-association.png)

如果您有错误的关联类型， 您将会遇到一个一致性错误： *关联 {Name} 必须是一个参考集(不是一个参考集)*

若要修复错误，请执行以下操作之一：

1. 打开您的域模型并双击您为参考集选择器或输入参考集选择器所使用的协会，并执行以下操作： <br/>

2.  在 **关联** 对话框窗口属性中，将 **多重性** 更改为多(在我们的示例中) 多个“员工”对象与多个“城市”对象相关联。

    ![多对多协会的多重性](attachments/consistency-errors-pages/dm-changing-multiplicity.png)

3. 点击 **确定** 保存更改。

您更改了关联的多重性，并修复了错误。

### 5.3 参照集选择器和输入参考集选择器的所有权不正确 {#incorrect-ownership}

作为参考集选择器和输入参考集选择器用于显示和编辑关联， 在配置它们时，所有权是一个重要的财产。 欲了解更多关于所有权的信息，请参阅 [Associations](associations)。

如果您更改该社团的所有者，您将会遇到一个一致性错误： *实体 {Name} 没有关联 {Name}*。 所有者应该是参考设置选择器或输入参考设置选择器指向的选择器。

当您的域模型中有两个实体时，让我们研究一个示例： **Cities** and **Employees**。

箭头总是从上下文指向小部件。 如果您想让员工选择城市，协会的所有者应该是 *员工* 实体。 希望数据容器 (例如数据视图) 放置参考集选择器或输入参考集选择器， 应该将其数据源设置为 **Context** >**员工**

![数据视图属性：员工实体](attachments/consistency-errors-pages/dm-data-view-employee-context.png)

如果您想要查看属于每个城市的员工， *城市* 实体应该是所有者。 数据容器 (例如数据视图) 您放置参考集选择器或输入参考集选择器， 应该将其数据源设置为 **Context** >**City**。

![数据视图属性：城市实体](attachments/consistency-errors-pages/dm-data-view-city-context.png)

如果您想要将这两者结合起来，所有者应该设置为 *，*。 然后您可以将参考集选择器或输入参考集选择器放置到数据容器中，数据源设置为 *City* 或 *Employee* 实体

为了改变所有权，请做以下工作：

1. 打开您的域模型。

2. 双击在参考集选择器或输入参考集选择器中使用的关联实体之一来打开属性。

3.  在实体属性 > 中， **关联** 标签， 根据你的用法，将 **所有者** 更改为 **默认** 或 **两者都** 更改为</strong>更替。

    ![所有者属性](attachments/consistency-errors-pages/dm-selecting-the-owner.png)

您已更改了该关联的所有者。

## 6 文件部件一致性错误

文件部件应该放置在数据容器中，否则你将会遇到一致性错误。 修复一致性错误的另一种方法是将一个文件部件放入一个 [代码片段](snippet)。 关于文件部件的更多信息，见 [文件小部件](file-widgets)。

| 检查面板中的文本                                                            | 错误的原因                                             | 修复路径                                                              |
| ------------------------------------------------------------------- | ------------------------------------------------- | ----------------------------------------------------------------- |
| [文件管理器](file-manager) 必须放置在连接到实体‘System.FileDocument’或专业化的数据视图或代码中。 | 您已经向页面添加了一个文件管理器，但它不在数据视图或配置正确的代码段内。              | 将此部件放入数据容器。 如果你想要将它放入代码片段，请注意你需要正确配置它：设置系统。 非法文档或其作为此代码片段的实体的专业化。 |
| [图像上传器](image-uploader) 必须放置在连接到实体'System.Image' 或专业化的数据视图或片段中。     | 您已将图像上传器添加到一个页面，但它不在数据视图或正确配置的代码段内。               | 将此部件放入数据容器。 如果你想要将它放入代码片段，请注意你需要正确配置它：设置系统。 作为这个代码片段的实体，它或它的专业化。  |
| 将此部件移动到数据容器中，例如数据视图或列表视图。                                           | 您已将 [图像查看器](image-viewer) 添加到您的页面，但它不在数据视图或列表视图内。 | 将此小部件放置在数据视图或列表视图。                                                |
| 选择此 [图像查看器](image-viewer) 的数据源实体。                                   | 您已将图像查看器添加到一个页面，它被放置在数据视图或列表视图中。 但没有指定图像查看器的实体。   | 打开图像查看器的属性 > **数据源** 部分，并在 **实体(路径)** 字段中选择一个实体。                  |
## 7 图像部件一致性错误

当您将图像部件添加到页面，但不选择图像本身，您将会遇到一致性错误“未选择图像”。

若要修复它，打开图像属性 > **常规** 部分 > **图像** 字段并选择一个图像。 欲了解图像部件上的更多信息，请参阅 [图像](image)。

## 8 点击事件一致性错误

You can specify an **On Click Event** for different widgets, for example, for buttons or images.

最常见的一致性错误与不完全配置点击事件有关。

要修复一致性错误，请完成对点击事件的配置 (例如) 对于点击事件 **显示页面**, 选择一个应该打开的特定页面, 或更改点击动作。

![点击事件示例](attachments/consistency-errors-pages/dm-on-click-event.png)

## 9 阅读更多

* [页 次](页面) 
