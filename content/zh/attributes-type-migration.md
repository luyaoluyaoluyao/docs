---
title: "属性类型迁移"
parent: "数据存储"
menu_order: 10
---

## 1 导言

Mendix 允许您在现有域模型上更改属性和关联类型。 本文件解释了这样做的后果。

## 2 现有属性的数据类型变化

### 2.1 数据类型变化行为

如果在模型中更改了现有属性的类型， 现有属性通常将被删除，新属性将被创建。 对于某些属性类型，Mendix 试图将数据库中的现有数据转换为新类型。

如果数据不应转换为新类型， 您必须移除建模器中的属性，并创建一个新列(具有相同名称)。 如果您更改类型并重命名列，Mendix 将重命名旧列名，然后尽可能尝试转换列值。

### 2.2 换算表

下表显示每个数据类型的变化，Mendix 是否会转换值。

| 关键字                                  | 手段                                                           |
| ------------------------------------ | ------------------------------------------------------------ |
| **&#x2713;**                         | 转换始终是可能的。                                                    |
| **\*<sup><small>笔记</small></sup>** | 转换并非总是可能的，或者在转换过程中数据会被更改。 更多信息见相关说明。 如果无法转换，行为与下面的“**X**”相同。 |
| **X**                                | 无法转换。 原始列将被删除，新列将被创建，现有行默认值。                                 |

![转化表 - 点击扩展](attachments/attributes-type-migration/conversion-table.png) (*点击图像以扩大*)

### 2.3 手工转换

即使Mendix 不能将特定列的值转换为另一种类型，您仍然可以手动管理它。 更改属性的名称，例如将文本“已删除”附加到其名称。 创建具有相同名称和新数据类型的新属性。 查找整个模型中旧的(重命名)属性的每个出现情况并将其更改为新属性。 确保不再有微流程或表单提及旧属性。

创建一个微流程，您可以在其中检索实体的所有实例，通过实例循环和每个实例获取。 读取旧属性的值，转换值，将其存储在新属性中并提交实例。 在调用此微流程的管理员表单上放置按钮。

当您部署时，您必须一次运行这个微流。 之后您可以删除微流程和指向它的按钮，然后您也可以删除旧属性。

## 现有关联的关联类型变化

当您有一对一的社团并将它更改为一对一社团时，请注意重复社团在数据库中没有被清除。 例如，从实体A到实体B的一对一的关联允许多个引用：a1至b1，a1至b2，等等。 一对一个协会只允许每个物体有单一参考值：a1至b1。 复制关联条目，如a1至b2，在重新部署您的应用时未被清除。
