---
title: "日期时间处理常见问题"
parent: "日期和时间处理"
notoc: true
---


在这个常见问题中，我们会回答一些关于日期时间的常见问题。

### 计算机程序的日期是什么？ (已读)

日期时间不过是计算机的一个数字。 这个数字表示1970-01-01:00:00 UTC 以来的秒数(或毫秒)。 这个常见问题解答了为什么这个日期被普遍选择，但你可以通过搜索Unix Epoch或阅读 [http://来找到这个日期，这超出了这个常见问题解答范围。 ikipedia.org/wiki/Unix_time](http://en.wikipedia.org/wiki/Unix_time)。

这也意味着在日期时间本身中存储无时区信息。 在对日期和时间进行解释时，必须铭记这一点。 对于比较日期时间对象等事项，没有任何地方化或时区的操作。 仅当格式化时间时，这意味着让它可以读取给人类， 或者对于诸如开始白天之类的操作，时区开始运行。

### 项目设置中默认时区设置的目的是什么？

默认时区决定新创建的用户的时区，并为服务器启动时没有时区的用户设置时区。 如果您的应用程序仅在一个时区内使用， 将此设置为默认设置您的应用程序的用户不必担心设置他们的时区。 对于人们从多个时区登录的项目，您可能不应该使用默认时区设置，因为它很少正确。

### 设置用户时区的目的是什么？

用户的时区设置定义了该用户在 **服务器**上进行的时区操作， 例如，当微流将日期时间值格式化为一个字符串来获取当日小时时。 请注意，这与用户浏览器中的操作不同。 很不幸，浏览器不可能在不同于 **的时区内运行，** 浏览器计算机之一 **或** 的 UTC 时区。 这意味着用户应将其时区设置为其浏览器运行的时区。 或者他们可能注意到在其浏览器中显示的内容以及(例如)生成的文件或格式化字符串中的差异。 请注意，如果您做 **不是** 设置时区给用户， 服务器有时只知道浏览器报告的 **当前** 时间的 UTC 偏移量， 在夏令时间调整后的一年的不同时期处理日期可能会导致意外的结果。

### 夏令时(DST)是如何处理的？

就像普通时区。 如果您在东部标准时间(EST) 通常是 UTC -5，然后您将在夏季东部夏令时间(EDT, 是 UTC -4)。 当然所有这一切都是自动处理的，但请注意你在夏天的不同时区里真的是ARE。

### 我计划于02:00时举行一个预定活动，使用服务器时间并设定它每天重复一次。 现在我的本地DST 已更改，预定的事件正开始运行一小时。 为什么？

这种情况可能令人困惑，但是可以预料。 排定活动的时间安排是间隔时间而不是时间性的。 请注意，预定活动的原始日期仍然在您的上一个时区(变更期间之前)， 排定的事件每24小时重复一次， 这可能意味着你会看到它运行的当地时间的变化， 因为在STS班期间，一天可能需要25小时或23小时。 这将导致暂时转移，只要STS变化持续下去。

### 如果我在UTC中计划它怎么办？

这将不太含糊，因为它总是同时运行在UTC中。 但您仍然会看到这些更改，因为您的时区会将其相对位置更改为UTC。

### 但我确实需要在02:00当地时间运行预定的事件！ 我是如何做的？

目前您可以通过在两个DST 周期内在 02:00时运行的2个事件来解决这个问题。 在 Microflow 中，您可以检查您目前正在使用的DST ，或者执行Microflow的其余部分。

### 一个没有本地化的日期如何工作？

每个类型日期时间的属性可以指定您是否想要将日期和时间本地化。 本地化属性和非本地化属性都存储在UTC 中，但只有本地化属性在用户时区显示时显示（或选择）他们的值。 例如在客户端或生成的文档中。 如果您对时间组件不感兴趣，使用非本地化属性 (例如) 如果你想要一个日期看上去与全世界完全相同。 否则， 这一日期可能因时区差异而改变：4月2日早上欧洲的日期和时间将是4月1日美国的日期。

### 如果我指定了一个未本地化的日期，令牌的值： `[%CurrentDateTime%]` 如果我在无害环境技术中，我应该在客户端中看到什么？ 现在是14:15，我应该看到那个时候还是19:15？

您应该查看 19:15 ，未本地化的日期将总是以 UTC 时间显示。 当前的日期时间只是一个时间，显然发生在地球上任何地方的同一时间， 但对于非本地化的日期，它将显示为 UTC 。

### 作为一个用户，我按一个 Microflow 按钮，想要比较一个未本地化的日期属性和本地化的日期属性。 在这种表达式的情况下，平台应该做些什么： `($entity/本地化日期 > $entity/非本地化日期)`, 例如，在 14:00 EST 的 localizeddate 和 unloceddate 的 14:15 UTC？

它将只是比较日期的 UTC 值。 查看前一个问题，我们说未本地化的日期纯粹是一个显示设置。 所以，在这种情况下，EST大于14.15 UTC，因为它真的比较了 19:00 UTC 和 14:15 UTC。

### 如果我想以不同的方式这样做，怎么办？

如果您想要在不同时区之间比较当天的时间，因此您想要在14个时区上一个本地化的日期。 0 EST to be SMALLER than a unlocalized date at 14:15 UTC 然后您将必须将日期格式化为字符串或整数并比较这种方式的时间。 请注意，当前时间 14:15 UTC 将在 14.00EST 之前发生，您应该真的想知道您为什么要这样做。

### 如果我在EST中运行以下表达式，结果应该是什么？ `[%BeginOfCurrentDay%] > [%BeginOfCurrentDayUTC%]`？

这取决于你何时执行此声明。 通常情况下，它会返回真，因为当前UTC 中的开始时间早于当前无害环境技术中的开始时间(太小)。 然而，如果您在当天已经在UTC 时间内发生变化，但不在EST 时间内运行(这样在午夜到05:00 UTC 之间) 或19:00和午夜EST，然后返回错误， 因为当前日的开始时间将在UTC 时区晚于一天。

### 如果我在数据网格中比较某些东西与 `[%CurrentDateTime%]` token ， 它应该用什么时间来限制本地化和非本地化日期？ 所以，如果我做一个 XPath 具有以下约束 `[LocalDateAttr > [%CurrentDateTime%]` 或以下约束 `[NotLocalDateAttr > [%CurrentDateTime%]` 当它是 12:10pm in Boston ET时，我应该期望什么结果？ 是否显示日期在 12:10 之后的所有记录或在 17:10 之后的所有记录？

在这种情况下，什么是本地日期是无关紧要的。 请注意，`
[%CurrentDateTime%]` 没有一个 UTC 变体，因为这没有任何意义。 世界各地的时间是一样的，即使根据不同地点的不同表现方式也是如此。 要回答问题，这两者都是肯定的。 它将显示12:10 EST (适合本地化日期)后的所有记录，与 17:10 UTC (这是您未本地化日期显示的方式)， 但这些时间是一样的。

### 我要计划在不同时区办公时间开始时举行一次活动。 我将如何这样做？

您可以通过使用指定格式和时区来解析您的时间字符串(例如：2013-01-01 09:00:00)，使用 Java 动作来做到这一点。

### 设置预定事件时区是什么？

预定的活动也需要时区才能在 就像一个用户运行微流程一样，您可能会遇到需要时区的操作。 预定事件时区的设置定义了哪个时区。 请注意，这是独立于预定事件被安排到RUN的时候，这个事件可以在服务器的时间或UTC 中进行规划。

### XML 中的日期时间如何处理没有时区信息？

如果在 XML 中遇到日期时间, 使用 XML-To-Domain 映射并指定无时区，则在 Mendix 5 之前处理。 3 日期时间将被解释为它在服务器的时区。 Mendix 5之后. 3 这个日期时间被解释为它在 UTC 中，使它与所有其它日期时间操作更加一致，并且减少了错误。 运行服务器的机器的位置不再影响任何操作。 然而，这可能会改变行为。
