---
title: "常规化 & 一对一关联"
parent: "实体"
menu_order: 5
---

Mendix 开发者必须每天选择是否使用继承权。 它是在您启动一个新项目时开始的；您想如何设置您的用户？ 您是否将继续使用管理模块中已有的帐户实体？ 或者您是否要与拥有一对一关联的单独实体一起工作到用户帐户？ 或者您是否要添加 **System.User** 继承的 (多个)实体？

在界定密切相关的结构时，很难决定最佳结构。 该实体是从我的结构继承还是想要一对一的协会？ 你应该考虑这两个选项。 这两种备选办法都会对应用的表现或发展速度产生巨大影响。

## Mendix 中的普及、专业化和继承问题

Mendix 域模型基于 [UML](http://en.wikipedia.org/wiki/Unified_Modeling_Language) [类图](http://en.wikipedia.org/wiki/Class_diagram), 允许我们指定对象/实体、其属性和关联性。 在Mendix中，UML中的一般化概念完全相同，但Mendix 域模型使用不同的符号来显示一般化。 UML 类图表使用一个空三角形(arrow)指向超级类的关联。 Mendix 通用表示实体上方的蓝色标签，指定实体名称。

UML 还允许我们指定关联的类型，例如 [聚合](http://en.wikipedia.org/wiki/Aggregation_(object-oriented_programming)) 或 [合成](http://en.wikipedia.org/wiki/Object_composition) 这些协会的定义具体规定了对象是否能够彼此不相容地存在。 与 UML 不同，我们无法指定关系船的强度。 必须使用 [事件微流](/refguide7/event-handlers) 或 [删除行为/预防](/refguide7/associations) 指定两个对象之间的任何依赖关系。

### 业绩

为了了解应用程序的影响和行为， 您需要了解 [交易](http://en.wikipedia.org/wiki/Database_transaction) 和 [(数据库) 隔离级别](http://en.wikipedia.org/wiki/Isolation_(database_systems)#Read_committed) 的基本概念。 Mendix 平台使用交易，这意味着每个微流程、提交和删除都会在一个(数据库)交易中发生。 一旦microflow 执行首次写入数据库，交易就会初始化。 获取活动将永远不会启动交易。

Mendix 平台使用交易级别 [读取提交](http://en.wikipedia.org/wiki/Isolation_(database_systems)#Read_committed), 这意味着， 正如名称所暗示的那样，只有提交的对象是在交易之外可见的。 任何其他试图访问同时被更改的对象的微流都必须等待交易完成。 这一点对知道很重要，因为这对你在继承权或相关物品之间的选择有重大影响。

### 创建和更改对象

当更改对象时，Mendix 平台将在您执行提交活动后立即将这些更改写入数据库。 将根据您更改的值执行更新或插入查询。 这种行为因数据库而异。 但这很可能会锁定记录，并阻止其他用户阅读，直到交易完成(要么完成要么回滚)。

#### 继承权

当您更改具有继承权的对象时，平台可能会阻止所有实体从层次结构中获取所有的东西。 因为它将查看超级类，这是所有检索所必需的。

#### 一对一协会

当更改对象时，任何关联对象都不会被更改。 这条规则有两个异常：当然如果你在对象事件中更改相关的对象 或因为关联的对象是自动委员会，请参阅 [如何与对象事件一起工作](/howto7/data-models/working-with-object-events)。

每当您的应用程序中有大量的写交易，最好为一对一的协会选择， 因为这限制了交易过程中更改/锁定的表数量。 然而，如果您插入的次数多于更新，可能值得再次使用继承。 继承使用一个较少的表来保存这种关系，它没有联系表。 因此，任何插入都需要少一个索引表才能更新。

### 正在获取对象

Mendix 是最优化的，只能检索正在执行的操作所需的数据。 这意味着，如果您不显示任何关联或继承属性，这些对象将不会被包含在检索查询中。

#### 继承权

如果您从超级类检索到任何专业，平台将始终包括查询中的整个层次结构， 为保证数据结构的连贯性。 例如，如果您有 **Adminstration.Account**，平台将包含系统。 您是否显示任何System.User 属性的表格，只是为了确保数据的一致性和完整。 两个表格都在对象id上有一个分类索引，因此将信息并入数据库是极为有效的。

#### 一对一协会

只有当相关对象出现在一个页面时才能检索。 这比继承效率低，因为信息是使用关联表检索的。 但基于信息是如何排序和过滤的。 通过关联表加入比继承使用的集群索引低得多。

如果您需要大量的搜索、分类和显示继承/相关信息，使用继承可能会更加有效。 如果只需要几页的相关信息， 与申请中任何其他地方更快的检索时间相比，通过关联而不是继承权检索信息的额外延迟可能是可以接受的。

## 灵活度

在将大量数据加载到应用程序之前，您应该在继承和关联之间做出决定。 添加关联时，可能需要额外的数据来指定对象之间的关系。 当您移除一般化时，两个对象之间的关系将会丢失。 不过，您可以使用一些技巧来解决以前的任何关系 一旦您的应用程序中有大量的数据，这可能是极其困难和耗费时间的。

### 继承权

使用继承权可以使您的微流更容易维护，您可以重新使用功能，但您也可以松散灵活性。 一旦您将继承权应用到一个实体，就很难移除继承权并保留所有的数据与关系。 或者如果记录可以更改子类的类型，例如员工对象改变并成为一个项目管理器对象。 在大多数情况下，没有完美的解决办法，总是可以作出让步，只要在作出选择时意识到所涉问题。

不要仅仅因为继承更容易添加，或者因为继承更慢而移除它。 特别是在不同的场景中，不同的对象类型必须经过一个类似的过程，应用继承可能是值得的，以便您可以重新使用功能并提高应用程序的一致性和稳定性。 一个你当然不想使用继承的地方是一个交易量高的系统。 编写和更新带有继承权的表格中的记录比仅仅更新单一表格要慢。 如果有许多新的或更改过的对象通过Excel、web 服务或任何其他集成继承，可以大大减慢该进程的速度。

### 一对一协会

当通过集成加载数据时，继承可以提高开发速度，因为功能可以被重新使用。 这是一个巨大的优势，因为今后的所有变化只能在一个地方适用。 但是，如果所有变化都可以存放在一个单独的实体中，继承权就会出现表现较慢的情况。 如果可以在一个单独的实体中分离所有数据， 而且这种信息只在有限的几个地点被应用使用， 保持一对一实体的速度要快得多。

## 五. 结论

这个解释可能没有给您一个关于何时使用继承权的问题的明确答案， 但这是因为没有正确或错误的答案。 继承权和一对一的社团都有其优点。 根据你需要决定哪个实体更好的情况。 下文简要概述了每个局势的所有利弊。 基于这些标准，您需要为您的实体决定哪个解决方案是值得的。

有几种情况可以给出明确的答案：

_从不对实体使用继承权：_

*   _不同子实体的大量交易 (作为一个高度我们考虑多次更改或每秒创建)_
*   _只有少数共同属性。 如果你觉得不值得为信息创建相关的对象，它就不值得继承其中任何一种。_

_实体从不使用一对一的协会：_

*   _这总是需要来自相关对象的信息，用户对相关属性进行大量搜索和排序。_
