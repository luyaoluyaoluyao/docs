---
title: "验证规则"
parent: "实体"
menu_order: 40
tags:
  - "域模型"
  - "实体"
  - "验证规则"
---

{{% alert type="info" %}}
<img src="attachments/chinese-translation/china.png" style="display: inline-block; margin: 0" /> 对于简体中文翻译，请点击 [中文为 xix x](https://cdn.mendix.tencent-cloud.com/documentation/refguide8/validation-rules.pdf)。
{{% /报警 %}}

## 1 导言

验证规则是应在对象完成之前满足的条件。 如果一个由验证规则定义的条件在对象执行时不满意，运行时服务器会产生验证错误。

如果对象是使用表单执行的，这将导致验证消息。

如果对象是在微流程中，这会导致一个错误，可以使用自定义错误处理处理。

在所有其他情况下，验证错误导致在 Java 异常被扔出。

例如，对于实体“客户”，任何时候都需要填写名称和贷项。 而且开支不能高于信贷。 这在域模型编辑器中可视化如下：

![](attachments/domain-model/customer-validation-rules.png)

{{% alert type="warning" %}}
您只能为可持久实体定义验证规则，因为它们旨在确保数据库的完整性。 因此，不可持续实体的验证规则被禁用。
{{% /报警 %}}

## 2 属性

您可以从 [实体对话框](entities#dialog-box) 添加和编辑实体验证规则。

下面的图像是验证规则属性的示例：

![](attachments/domain-model/validation-rule-properties.png)

验证规则属性由以下部分组成：

* [A. 概况](#general)
* [规 则](#rule)

### 2.1 一般财产 {#general}

#### 2.1.1 属性

**属性** 指定了验证规则适用的属性。 验证规则适用于实体的属性，如果它具有一般性，则适用其一般化属性。

#### 2.1.2 错误消息

**错误消息** 定义了当属性值不符合验证规则定义的条件时显示给最终用户的消息。

### 2.2 规则属性 {#rule}

#### 2.2.1 规则

该规则定义了属性应满足的条件。

| 选项        | 描述                                                   |
| --------- | ---------------------------------------------------- |
| 需要 *(默认)* | 属性需要有一个值。 它不能为空。                                     |
| 唯一的       | 此属性的值必须不同于同一实体所有其他对象中此属性的值。                          |
| 等于        | 属性值必须等于指定的值或等于同一对象的另一个属性的值。                          |
| Range     | 属性值必须大于或等于或小于等于或等于两个值。 这些值要么是指定的固定值，要么是同一个对象的其他属性的值。 |
| 正则表达式     | 属性需要匹配正则表达式存储在 [正则表达式](regular-expressions) 资源。      |
| 最大长度      | 属性可能不超过指定的字符数。                                       |

{{% alert type="info" %}}
日期值应以 [ISO 8601](http://en.wikipedia.org/wiki/ISO_8601) 格式输入，例如，2015-07-26。
{{% /报警 %}}

#### 2.2.2 规则命令

验证规则可以在 Studio Pro中订购。 规则的顺序决定其适用的顺序。 如果多项规则被违反，他们的所有错误信息都会被录制(按定义的顺序)，并在页面中显示。 尽管可以为实体中的所有验证规则设置订单， 每个属性只有订单才会产生影响，因为所有属性的验证规则都已执行。

`唯一性` 验证不遵循定义的顺序。 此验证需要数据库查询，并且只有当完整的对象符合所有其他验证规则时才会执行。
