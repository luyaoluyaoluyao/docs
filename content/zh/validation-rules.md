---
title: "验证规则"
parent: "实体"
menu_order: 40
tags:
  - "域模型"
  - "实体"
  - "验证规则"
---


验证规则是应在对象完成之前满足的条件。 如果一个由验证规则定义的条件在对象执行时不满意，服务器会产生验证错误。 如果对象是使用表单执行的，这将导致验证消息。 当在微流程中提交对象时，这会导致一个错误，可以使用自定义错误处理处理。 在所有其他情况下，验证错误导致在 Java 异常被扔出。

{{% alert type="info" %}}

对于实体“客户”来说，名称和信用额必须随时填写，费用不能高于信贷。 这在域模型编辑器中可视化如下：

![](attachments/domain-model-editor/917546.png)

{{% /警示%}}!{% alert type="warning" %}}

只有可持久的实体才能定义验证规则，因为它们对数据库的完整性说些话。 因此，不可持续实体的验证规则被禁用。

{{% /报警 %}}

## 常规属性

### 属性

此属性定义了验证规则适用的属性。 一个实体可以为自己的属性或为其一般化之一的属性指定验证规则。

### 错误消息

此属性定义了当属性值不符合验证规则定义的条件时显示给最终用户的消息。

## 规则属性

### 规 则

该规则定义了属性应满足的条件。

| 选项    | 描述                                   |
| ----- | ------------------------------------ |
| 必填    | 属性需要有一个值。 它不能为空。                     |
| 唯一的   | 该属性应该有一个与同一实体所有其他对象中此属性的值相比独特的值。     |
| 等于    | 属性值必须等于指定的值或等于同一对象的另一个属性的值。          |
| Range | 属性值必须在指定值之间或同一对象其他属性之间的范围内。          |
| 正则表达式 | 属性需要匹配 [正则表达式](regular-expressions)。 |
| 最大长度  | 属性可能不超过指定的字符数。                       |

_默认值：_ 必填

{{% alert type="warning" %}}

日期值应以 [ISO 8601](http://en.wikipedia.org/wiki/ISO_8601) 格式输入，例如，2015-07-26。

{{% /报警 %}}

## 规则顺序

验证规则可以在模型中订购。 规则的顺序决定执行的顺序。 如果多项规则被违反，它们的错误信息将会被封禁(按定义的顺序)，并在页面中显示。 尽管可以为实体中的所有验证规则设置订单， 每个属性只有订单才会产生影响，因为所有属性的验证规则都已执行。

`唯一性` 验证不符合定义的顺序。 此验证需要数据库查询，并且只有当完整的对象符合所有其他验证规则时才会执行。
