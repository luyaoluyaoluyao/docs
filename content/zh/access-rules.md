---
title: "访问规则"
parent: "实体"
menu_order: 70
tags:
  - "域模型"
  - "实体"
  - "访问规则"
  - "x路径约束"
  - "模块角色"
---

实体的访问规则定义了允许用户对实体对象做些什么。 用户可以创建和/或删除对象，查看和/或编辑会员值。 成员是实体的属性或协会。 此外，可以通过 [XPath 约束](xpath-constraints) 来限制查看、编辑和移除的对象集。

每个访问规则都适用于一个或多个 [模块角色](module-role)。 准入规则赋予这些角色某些准入权。 规则是附加的，这意味着如果多个访问规则适用于同一个模块角色 该模块角色的所有访问权限都被合并。

{{% alert type="warning" %}}

准入规则不是从一个实体的普遍化中继承来的；相反，每个实体的安全都是明确规定的。 这意味着，在将访问规则添加到实体时，总是确保所有必需的 XPath 约束都得到应用。 可能已经定义了 XPath 限制的一般访问规则不适用于其专业，因此不会限制其可见性。

{{% /报警 %}}

## 属性

访问规则定义在实体 **属性** > **访问规则** 部分中。

![实体访问规则](attachments/access-rules/dm-access-rules-section.png)

{{% alert type="info" %}}

**访问规则** 部分仅在项目安全设置为 **Production** 时才可见。 欲了解更多信息，请参阅 [工程安全](project-security)。

{{% /报警 %}}

### 文件

在此属性中，您可以描述访问规则的意图。 这有助于使访问规则易于理解，在非细致的 XPath 限制的情况下尤其如此。

### 规则适用于以下模块角色

此访问规则所适用的模块角色在前面的框中有一个复签。 所有拥有至少一个选中模块角色的用户都能获得规则定义的访问权限。

### 允许创建新对象

如果选中此复选框，用户可以创建此实体的新对象。

### 允许删除现有对象

如果选中此复选框，用户可以删除此实体的现有对象。

可以删除的对象组可以通过使用 XPath 约束来限制(见下文)。

### 会员读写权限

会员阅读和写权定义了每个会员（属性或协会）的访问权。 这些访问权表示是否允许用户查看和/或编辑会员的值。

| 值     | 描述                 |
| ----- | ------------------ |
| -     | 用户不允许查看或编辑会员的值。    |
| 已读    | 用户可以查看此会员的值，但不能编辑。 |
| 读取，写入 | 用户可以查看和编辑此成员的值。    |

可以使用 XPath 约束限制成员访问权所适用的对象组(见下文)。

{{% alert type="info" %}}

客户可以查看折扣，但不允许编辑折扣。 折扣属性的访问权限为“已读”。

![](attachments/domain-model-editor/917534.png)

{{% /报警 %}}

### XPath 约束

[XPath 约束](xpath-constraints) 可以用于限制访问规则所适用的对象集。 如果XPath 约束为空，规则适用于实体的所有对象。

实体“客户”是实体“用户”的专业化。 实体“订单”与实体“客户”相关联。

![](attachments/domain-model-editor/917537.png)

登录客户可以查看个人订单，但不允许查看其他客户的订单。 这是通过在实体的访问规则中使用以下的 XPath 约束来完成的：

```java
[Module.Order_custer = '[%CurrentUser%]']
```

由于此 XPath 约束，访问规则仅适用于客户是当前用户签名的订单。

{{% alert type="info" %}}

复选框“显示XPath 约束”仅表明您是否可以在访问规则对话框中看到XPath 约束， 它不影响您的应用程序的行为。

{{% /警示%}}!{% alert type="warning" %}}

XPath 约束只能适用于可持久实体，因为它们是在数据库中计算的。 定义不可持续实体的 XPath 约束导致一致性检查错误。

{{% /报警 %}}
